{"/home/travis/build/npmtest/node-npmtest-wordpos/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":46}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_wordpos */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireExampleJsFromReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-wordpos/lib.npmtest_wordpos.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/lib.npmtest_wordpos.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":52}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":58}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_wordpos */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_wordpos = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_wordpos = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-wordpos/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":315,"loc":{"start":{"line":315,"column":32},"end":{"line":315,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":326,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":325,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":296,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":303,"column":8},"end":{"line":303,"column":82},"skip":true},"70":{"start":{"line":306,"column":8},"end":{"line":308,"column":9},"skip":true},"71":{"start":{"line":307,"column":12},"end":{"line":307,"column":82},"skip":true},"72":{"start":{"line":310,"column":8},"end":{"line":312,"column":9},"skip":true},"73":{"start":{"line":311,"column":12},"end":{"line":311,"column":18},"skip":true},"74":{"start":{"line":313,"column":8},"end":{"line":313,"column":54},"skip":true},"75":{"start":{"line":314,"column":8},"end":{"line":314,"column":69},"skip":true},"76":{"start":{"line":315,"column":8},"end":{"line":323,"column":36},"skip":true},"77":{"start":{"line":316,"column":12},"end":{"line":316,"column":61},"skip":true},"78":{"start":{"line":317,"column":12},"end":{"line":320,"column":13},"skip":true},"79":{"start":{"line":318,"column":16},"end":{"line":318,"column":75},"skip":true},"80":{"start":{"line":319,"column":16},"end":{"line":319,"column":23},"skip":true},"81":{"start":{"line":321,"column":12},"end":{"line":321,"column":38},"skip":true},"82":{"start":{"line":322,"column":12},"end":{"line":322,"column":27},"skip":true},"83":{"start":{"line":324,"column":8},"end":{"line":324,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":51}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":324,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":65},"skip":true},{"start":{"line":298,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":43},"end":{"line":303,"column":75},"skip":true},{"start":{"line":303,"column":79},"end":{"line":303,"column":81},"skip":true}]},"25":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true},{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true}]},"26":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true},{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true}]},"27":{"line":313,"type":"binary-expr","locations":[{"start":{"line":313,"column":27},"end":{"line":313,"column":43},"skip":true},{"start":{"line":313,"column":47},"end":{"line":313,"column":53},"skip":true}]},"28":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true},{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-wordpos && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_wordpos */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_wordpos","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_wordpos.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        // bug-workaround - long $npm_package_buildCustomOrg","        /* jslint-ignore-begin */","        local.assetsDict['/assets.npmtest_wordpos.rollup.js'] =","            local.assetsDict['/assets.npmtest_wordpos.rollup.js'] ||","            local.fs.readFileSync(","                local.npmtest_wordpos.__dirname + '/lib.npmtest_wordpos.js',","                'utf8'","            ).replace((/^#!/), '//');","        /* jslint-ignore-end */","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"296":1,"303":1,"306":1,"307":1,"310":1,"311":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"319":1,"321":1,"322":1,"324":1}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/src/wordpos.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/src/wordpos.js","s":{"1":1,"2":1,"3":0,"4":1,"5":1,"6":1,"7":0,"8":1,"9":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1,"18":4,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":4,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":4,"44":0,"45":0,"46":1,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":1,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":1,"73":1,"74":1,"75":0,"76":0,"77":1,"78":0,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":1,"86":0,"87":0,"88":1,"89":0,"90":0,"91":1,"92":0,"93":0,"94":0,"95":1,"96":0,"97":0,"98":0,"99":0,"100":0,"101":1,"102":0,"103":0,"104":1,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":1,"112":1,"113":1,"114":1,"115":1,"116":1,"117":1,"118":1,"119":1,"120":1,"121":1,"122":1,"123":1,"124":1,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":1,"133":0,"134":0,"135":0,"136":1,"137":1,"138":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0,0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"f":{"1":0,"2":1,"3":0,"4":0,"5":0,"6":4,"7":0,"8":0,"9":0,"10":4,"11":0,"12":0,"13":4,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},"fnMap":{"1":{"name":"normalize","line":21,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":25}}},"2":{"name":"makeStopwordString","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":39}}},"3":{"name":"isStopword","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":37}}},"4":{"name":"tokenizer","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":24}}},"5":{"name":"prepText","line":37,"loc":{"start":{"line":37,"column":0},"end":{"line":37,"column":24}}},"6":{"name":"lookup","line":52,"loc":{"start":{"line":52,"column":0},"end":{"line":52,"column":21}}},"7":{"name":"(anonymous_7)","line":53,"loc":{"start":{"line":53,"column":9},"end":{"line":53,"column":34}}},"8":{"name":"(anonymous_8)","line":63,"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":29}}},"9":{"name":"done","line":74,"loc":{"start":{"line":74,"column":4},"end":{"line":74,"column":27}}},"10":{"name":"is","line":94,"loc":{"start":{"line":94,"column":0},"end":{"line":94,"column":16}}},"11":{"name":"(anonymous_11)","line":95,"loc":{"start":{"line":95,"column":9},"end":{"line":95,"column":46}}},"12":{"name":"(anonymous_12)","line":105,"loc":{"start":{"line":105,"column":12},"end":{"line":105,"column":29}}},"13":{"name":"get","line":122,"loc":{"start":{"line":122,"column":0},"end":{"line":122,"column":19}}},"14":{"name":"(anonymous_14)","line":123,"loc":{"start":{"line":123,"column":9},"end":{"line":123,"column":46}}},"15":{"name":"exec","line":135,"loc":{"start":{"line":135,"column":4},"end":{"line":135,"column":24}}},"16":{"name":"collect","line":138,"loc":{"start":{"line":138,"column":14},"end":{"line":138,"column":39}}},"17":{"name":"done","line":143,"loc":{"start":{"line":143,"column":4},"end":{"line":143,"column":19}}},"18":{"name":"nextTick","line":154,"loc":{"start":{"line":154,"column":0},"end":{"line":154,"column":28}}},"19":{"name":"(anonymous_19)","line":166,"loc":{"start":{"line":166,"column":14},"end":{"line":166,"column":32}}},"20":{"name":"(anonymous_20)","line":222,"loc":{"start":{"line":222,"column":22},"end":{"line":222,"column":47}}},"21":{"name":"exec","line":234,"loc":{"start":{"line":234,"column":2},"end":{"line":234,"column":24}}},"22":{"name":"collect","line":237,"loc":{"start":{"line":237,"column":12},"end":{"line":237,"column":36}}},"23":{"name":"done","line":242,"loc":{"start":{"line":242,"column":2},"end":{"line":242,"column":18}}},"24":{"name":"error","line":249,"loc":{"start":{"line":249,"column":2},"end":{"line":249,"column":22}}},"25":{"name":"(anonymous_25)","line":264,"loc":{"start":{"line":264,"column":22},"end":{"line":264,"column":47}}},"26":{"name":"exec","line":277,"loc":{"start":{"line":277,"column":2},"end":{"line":277,"column":24}}},"27":{"name":"collect","line":280,"loc":{"start":{"line":280,"column":12},"end":{"line":280,"column":38}}},"28":{"name":"done","line":287,"loc":{"start":{"line":287,"column":2},"end":{"line":287,"column":18}}},"29":{"name":"error","line":302,"loc":{"start":{"line":302,"column":2},"end":{"line":302,"column":22}}},"30":{"name":"(anonymous_30)","line":314,"loc":{"start":{"line":314,"column":27},"end":{"line":314,"column":42}}},"31":{"name":"(anonymous_31)","line":373,"loc":{"start":{"line":373,"column":20},"end":{"line":373,"column":51}}},"32":{"name":"error","line":382,"loc":{"start":{"line":382,"column":2},"end":{"line":382,"column":22}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":18,"column":37}},"2":{"start":{"line":21,"column":0},"end":{"line":23,"column":1}},"3":{"start":{"line":22,"column":2},"end":{"line":22,"column":49}},"4":{"start":{"line":25,"column":0},"end":{"line":27,"column":1}},"5":{"start":{"line":26,"column":2},"end":{"line":26,"column":39}},"6":{"start":{"line":29,"column":0},"end":{"line":31,"column":1}},"7":{"start":{"line":30,"column":2},"end":{"line":30,"column":46}},"8":{"start":{"line":33,"column":0},"end":{"line":35,"column":1}},"9":{"start":{"line":34,"column":2},"end":{"line":34,"column":26}},"10":{"start":{"line":37,"column":0},"end":{"line":44,"column":1}},"11":{"start":{"line":38,"column":2},"end":{"line":38,"column":35}},"12":{"start":{"line":38,"column":23},"end":{"line":38,"column":35}},"13":{"start":{"line":39,"column":2},"end":{"line":39,"column":40}},"14":{"start":{"line":40,"column":2},"end":{"line":40,"column":46}},"15":{"start":{"line":40,"column":31},"end":{"line":40,"column":46}},"16":{"start":{"line":41,"column":2},"end":{"line":43,"column":5}},"17":{"start":{"line":52,"column":0},"end":{"line":86,"column":1}},"18":{"start":{"line":53,"column":2},"end":{"line":85,"column":4}},"19":{"start":{"line":54,"column":4},"end":{"line":57,"column":16}},"20":{"start":{"line":59,"column":4},"end":{"line":59,"column":27}},"21":{"start":{"line":62,"column":4},"end":{"line":72,"column":19}},"22":{"start":{"line":64,"column":8},"end":{"line":70,"column":9}},"23":{"start":{"line":66,"column":10},"end":{"line":66,"column":67}},"24":{"start":{"line":69,"column":10},"end":{"line":69,"column":26}},"25":{"start":{"line":74,"column":4},"end":{"line":84,"column":5}},"26":{"start":{"line":75,"column":6},"end":{"line":79,"column":7}},"27":{"start":{"line":76,"column":8},"end":{"line":76,"column":28}},"28":{"start":{"line":78,"column":8},"end":{"line":78,"column":33}},"29":{"start":{"line":81,"column":6},"end":{"line":81,"column":47}},"30":{"start":{"line":82,"column":6},"end":{"line":82,"column":31}},"31":{"start":{"line":83,"column":6},"end":{"line":83,"column":21}},"32":{"start":{"line":94,"column":0},"end":{"line":113,"column":1}},"33":{"start":{"line":95,"column":2},"end":{"line":112,"column":4}},"34":{"start":{"line":97,"column":4},"end":{"line":100,"column":42}},"35":{"start":{"line":101,"column":4},"end":{"line":101,"column":27}},"36":{"start":{"line":103,"column":4},"end":{"line":111,"column":9}},"37":{"start":{"line":106,"column":8},"end":{"line":106,"column":30}},"38":{"start":{"line":107,"column":8},"end":{"line":107,"column":32}},"39":{"start":{"line":108,"column":8},"end":{"line":108,"column":49}},"40":{"start":{"line":109,"column":8},"end":{"line":109,"column":33}},"41":{"start":{"line":110,"column":8},"end":{"line":110,"column":22}},"42":{"start":{"line":122,"column":0},"end":{"line":150,"column":1}},"43":{"start":{"line":123,"column":2},"end":{"line":149,"column":4}},"44":{"start":{"line":124,"column":4},"end":{"line":128,"column":18}},"45":{"start":{"line":131,"column":4},"end":{"line":133,"column":18}},"46":{"start":{"line":135,"column":4},"end":{"line":141,"column":5}},"47":{"start":{"line":136,"column":6},"end":{"line":140,"column":11}},"48":{"start":{"line":139,"column":10},"end":{"line":139,"column":39}},"49":{"start":{"line":143,"column":4},"end":{"line":148,"column":5}},"50":{"start":{"line":144,"column":6},"end":{"line":144,"column":27}},"51":{"start":{"line":145,"column":6},"end":{"line":145,"column":47}},"52":{"start":{"line":146,"column":6},"end":{"line":146,"column":31}},"53":{"start":{"line":147,"column":6},"end":{"line":147,"column":21}},"54":{"start":{"line":154,"column":0},"end":{"line":158,"column":1}},"55":{"start":{"line":155,"column":2},"end":{"line":157,"column":3}},"56":{"start":{"line":156,"column":4},"end":{"line":156,"column":25}},"57":{"start":{"line":166,"column":0},"end":{"line":191,"column":2}},"58":{"start":{"line":167,"column":2},"end":{"line":167,"column":15}},"59":{"start":{"line":169,"column":2},"end":{"line":171,"column":23}},"60":{"start":{"line":173,"column":2},"end":{"line":173,"column":35}},"61":{"start":{"line":175,"column":2},"end":{"line":175,"column":51}},"62":{"start":{"line":176,"column":2},"end":{"line":176,"column":51}},"63":{"start":{"line":177,"column":2},"end":{"line":177,"column":49}},"64":{"start":{"line":178,"column":2},"end":{"line":178,"column":49}},"65":{"start":{"line":180,"column":2},"end":{"line":180,"column":49}},"66":{"start":{"line":181,"column":2},"end":{"line":181,"column":49}},"67":{"start":{"line":182,"column":2},"end":{"line":182,"column":47}},"68":{"start":{"line":183,"column":2},"end":{"line":183,"column":47}},"69":{"start":{"line":186,"column":2},"end":{"line":186,"column":31}},"70":{"start":{"line":188,"column":2},"end":{"line":190,"column":3}},"71":{"start":{"line":189,"column":4},"end":{"line":189,"column":72}},"72":{"start":{"line":194,"column":0},"end":{"line":211,"column":2}},"73":{"start":{"line":213,"column":0},"end":{"line":213,"column":37}},"74":{"start":{"line":222,"column":0},"end":{"line":253,"column":2}},"75":{"start":{"line":223,"column":2},"end":{"line":227,"column":78}},"76":{"start":{"line":229,"column":2},"end":{"line":232,"column":18}},"77":{"start":{"line":234,"column":2},"end":{"line":240,"column":3}},"78":{"start":{"line":235,"column":4},"end":{"line":239,"column":9}},"79":{"start":{"line":238,"column":8},"end":{"line":238,"column":41}},"80":{"start":{"line":242,"column":2},"end":{"line":247,"column":3}},"81":{"start":{"line":243,"column":4},"end":{"line":243,"column":31}},"82":{"start":{"line":244,"column":4},"end":{"line":244,"column":45}},"83":{"start":{"line":245,"column":4},"end":{"line":245,"column":29}},"84":{"start":{"line":246,"column":4},"end":{"line":246,"column":19}},"85":{"start":{"line":249,"column":2},"end":{"line":252,"column":3}},"86":{"start":{"line":250,"column":4},"end":{"line":250,"column":35}},"87":{"start":{"line":251,"column":4},"end":{"line":251,"column":14}},"88":{"start":{"line":264,"column":0},"end":{"line":306,"column":2}},"89":{"start":{"line":265,"column":2},"end":{"line":270,"column":70}},"90":{"start":{"line":272,"column":2},"end":{"line":275,"column":18}},"91":{"start":{"line":277,"column":2},"end":{"line":285,"column":3}},"92":{"start":{"line":278,"column":4},"end":{"line":284,"column":9}},"93":{"start":{"line":282,"column":8},"end":{"line":282,"column":57}},"94":{"start":{"line":283,"column":8},"end":{"line":283,"column":31}},"95":{"start":{"line":287,"column":2},"end":{"line":300,"column":3}},"96":{"start":{"line":288,"column":4},"end":{"line":293,"column":20}},"97":{"start":{"line":295,"column":4},"end":{"line":295,"column":46}},"98":{"start":{"line":297,"column":4},"end":{"line":297,"column":45}},"99":{"start":{"line":298,"column":4},"end":{"line":298,"column":29}},"100":{"start":{"line":299,"column":4},"end":{"line":299,"column":16}},"101":{"start":{"line":302,"column":2},"end":{"line":305,"column":3}},"102":{"start":{"line":303,"column":4},"end":{"line":303,"column":27}},"103":{"start":{"line":304,"column":4},"end":{"line":304,"column":14}},"104":{"start":{"line":314,"column":0},"end":{"line":326,"column":2}},"105":{"start":{"line":315,"column":2},"end":{"line":324,"column":3}},"106":{"start":{"line":317,"column":6},"end":{"line":317,"column":58}},"107":{"start":{"line":319,"column":6},"end":{"line":319,"column":58}},"108":{"start":{"line":321,"column":4},"end":{"line":321,"column":54}},"109":{"start":{"line":323,"column":6},"end":{"line":323,"column":56}},"110":{"start":{"line":325,"column":2},"end":{"line":325,"column":12}},"111":{"start":{"line":333,"column":0},"end":{"line":333,"column":43}},"112":{"start":{"line":334,"column":0},"end":{"line":334,"column":40}},"113":{"start":{"line":335,"column":0},"end":{"line":335,"column":38}},"114":{"start":{"line":336,"column":0},"end":{"line":336,"column":38}},"115":{"start":{"line":342,"column":0},"end":{"line":342,"column":35}},"116":{"start":{"line":343,"column":0},"end":{"line":343,"column":32}},"117":{"start":{"line":344,"column":0},"end":{"line":344,"column":30}},"118":{"start":{"line":345,"column":0},"end":{"line":345,"column":30}},"119":{"start":{"line":351,"column":0},"end":{"line":351,"column":48}},"120":{"start":{"line":352,"column":0},"end":{"line":352,"column":42}},"121":{"start":{"line":353,"column":0},"end":{"line":353,"column":38}},"122":{"start":{"line":354,"column":0},"end":{"line":354,"column":38}},"123":{"start":{"line":362,"column":0},"end":{"line":362,"column":30}},"124":{"start":{"line":373,"column":0},"end":{"line":387,"column":2}},"125":{"start":{"line":374,"column":2},"end":{"line":374,"column":26}},"126":{"start":{"line":375,"column":2},"end":{"line":375,"column":92}},"127":{"start":{"line":375,"column":38},"end":{"line":375,"column":92}},"128":{"start":{"line":377,"column":2},"end":{"line":377,"column":40}},"129":{"start":{"line":378,"column":2},"end":{"line":378,"column":80}},"130":{"start":{"line":378,"column":13},"end":{"line":378,"column":80}},"131":{"start":{"line":380,"column":2},"end":{"line":380,"column":39}},"132":{"start":{"line":382,"column":2},"end":{"line":386,"column":3}},"133":{"start":{"line":383,"column":4},"end":{"line":383,"column":29}},"134":{"start":{"line":384,"column":4},"end":{"line":384,"column":34}},"135":{"start":{"line":385,"column":4},"end":{"line":385,"column":31}},"136":{"start":{"line":394,"column":0},"end":{"line":394,"column":20}},"137":{"start":{"line":400,"column":0},"end":{"line":400,"column":30}},"138":{"start":{"line":403,"column":0},"end":{"line":403,"column":25}}},"branchMap":{"1":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":2},"end":{"line":38,"column":2}},{"start":{"line":38,"column":2},"end":{"line":38,"column":2}}]},"2":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":40,"column":2}},{"start":{"line":40,"column":2},"end":{"line":40,"column":2}}]},"3":{"line":42,"type":"cond-expr","locations":[{"start":{"line":42,"column":41},"end":{"line":42,"column":63}},{"start":{"line":42,"column":66},"end":{"line":42,"column":78}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":14},"end":{"line":55,"column":21}},{"start":{"line":55,"column":25},"end":{"line":55,"column":35}}]},"5":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":64,"column":8}},{"start":{"line":64,"column":8},"end":{"line":64,"column":8}}]},"6":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":6},"end":{"line":75,"column":6}},{"start":{"line":75,"column":6},"end":{"line":75,"column":6}}]},"7":{"line":81,"type":"binary-expr","locations":[{"start":{"line":81,"column":6},"end":{"line":81,"column":13}},{"start":{"line":81,"column":17},"end":{"line":81,"column":46}}]},"8":{"line":97,"type":"binary-expr","locations":[{"start":{"line":97,"column":18},"end":{"line":97,"column":38}},{"start":{"line":97,"column":42},"end":{"line":97,"column":53}}]},"9":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":14},"end":{"line":98,"column":21}},{"start":{"line":98,"column":25},"end":{"line":98,"column":35}}]},"10":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":8},"end":{"line":108,"column":15}},{"start":{"line":108,"column":19},"end":{"line":108,"column":48}}]},"11":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":18},"end":{"line":124,"column":38}},{"start":{"line":124,"column":42},"end":{"line":124,"column":53}}]},"12":{"line":125,"type":"binary-expr","locations":[{"start":{"line":125,"column":14},"end":{"line":125,"column":21}},{"start":{"line":125,"column":25},"end":{"line":125,"column":35}}]},"13":{"line":139,"type":"binary-expr","locations":[{"start":{"line":139,"column":10},"end":{"line":139,"column":16}},{"start":{"line":139,"column":20},"end":{"line":139,"column":38}}]},"14":{"line":145,"type":"binary-expr","locations":[{"start":{"line":145,"column":6},"end":{"line":145,"column":13}},{"start":{"line":145,"column":17},"end":{"line":145,"column":46}}]},"15":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":2},"end":{"line":155,"column":2}},{"start":{"line":155,"column":2},"end":{"line":155,"column":2}}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":32},"end":{"line":169,"column":51}},{"start":{"line":169,"column":55},"end":{"line":169,"column":62}},{"start":{"line":169,"column":66},"end":{"line":169,"column":68}}]},"17":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":2},"end":{"line":188,"column":2}},{"start":{"line":188,"column":2},"end":{"line":188,"column":2}}]},"18":{"line":226,"type":"binary-expr","locations":[{"start":{"line":226,"column":12},"end":{"line":226,"column":19}},{"start":{"line":226,"column":23},"end":{"line":226,"column":33}}]},"19":{"line":244,"type":"binary-expr","locations":[{"start":{"line":244,"column":4},"end":{"line":244,"column":11}},{"start":{"line":244,"column":15},"end":{"line":244,"column":44}}]},"20":{"line":268,"type":"binary-expr","locations":[{"start":{"line":268,"column":12},"end":{"line":268,"column":19}},{"start":{"line":268,"column":23},"end":{"line":268,"column":33}}]},"21":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":4},"end":{"line":297,"column":11}},{"start":{"line":297,"column":15},"end":{"line":297,"column":44}}]},"22":{"line":315,"type":"switch","locations":[{"start":{"line":316,"column":4},"end":{"line":317,"column":58}},{"start":{"line":318,"column":4},"end":{"line":319,"column":58}},{"start":{"line":320,"column":4},"end":{"line":320,"column":13}},{"start":{"line":320,"column":14},"end":{"line":321,"column":54}},{"start":{"line":322,"column":4},"end":{"line":323,"column":56}}]},"23":{"line":375,"type":"if","locations":[{"start":{"line":375,"column":2},"end":{"line":375,"column":2}},{"start":{"line":375,"column":2},"end":{"line":375,"column":2}}]},"24":{"line":375,"type":"binary-expr","locations":[{"start":{"line":375,"column":6},"end":{"line":375,"column":21}},{"start":{"line":375,"column":25},"end":{"line":375,"column":36}}]},"25":{"line":378,"type":"if","locations":[{"start":{"line":378,"column":2},"end":{"line":378,"column":2}},{"start":{"line":378,"column":2},"end":{"line":378,"column":2}}]},"26":{"line":384,"type":"binary-expr","locations":[{"start":{"line":384,"column":4},"end":{"line":384,"column":12}},{"start":{"line":384,"column":16},"end":{"line":384,"column":33}}]}},"code":["/*!","* wordpos.js","*","*    Node.js part-of-speech utilities using WordNet database.","*","* Copyright (c) 2012-2016 mooster@42at.com","* https://github.com/moos/wordpos","*","* Released under MIT license","*/","","var _ = require('underscore')._,","  util = require('util'),","  stopwords = require('../lib/natural/util/stopwords').words,","  stopwordsStr = makeStopwordString(stopwords),","  WNdb = require('wordnet-db'),","  DataFile = require('./dataFile'),","  IndexFile = require('./indexFile');","","","function normalize(word) {","  return word.toLowerCase().replace(/\\s+/g, '_');","}","","function makeStopwordString(stopwords) {","  return ' '+ stopwords.join(' ') +' ';","}","","function isStopword(stopwords, word) {","  return stopwords.indexOf(' '+word+' ') >= 0;","}","","function tokenizer(str) {","  return str.split(/\\W+/); //_.without(results,'',' ')","}","","function prepText(text) {","  if (_.isArray(text)) return text;","  var deduped = _.uniq(tokenizer(text));","  if (!this.options.stopwords) return deduped;","  return _.reject(deduped, _.bind(isStopword, null,","    _.isString(this.options.stopwords) ? this.options.stopwords : stopwordsStr","  ));","}","","/**"," * factory for main lookup function"," *"," * @param pos {string} - n/v/a/r"," * @returns {Function} - lookup function bound to POS"," */","function lookup(pos) {","  return function(word, callback) {","    var profile = this.options.profile,","      start = profile && new Date(),","      files = this.getFilesFor(pos),","      args = [];","","    word = normalize(word);","","    // lookup index","    return files.index.lookup(word)","      .then(function(result) {","        if (result) {","          // lookup data","          return files.data.lookup(result.synsetOffset).then(done);","        } else {","          // not found in index","          return done([]);","        }","      })","      .catch(done);","","    function done(results) {","      if (results instanceof Error) {","        args.push([], word);","      } else {","        args.push(results, word);","      }","      //console.log(3333, args)","      profile && args.push(new Date() - start);","      nextTick(callback, args);","      return results;","    }","  };","}","","/**"," * isX() factory function"," *"," * @param pos {string} - n/v/a/r"," * @returns {Function}"," */","function is(pos){","  return function(word, callback, _noprofile) {","    // disable profiling when isX() used internally","    var profile = this.options.profile && !_noprofile,","      start = profile && new Date(),","      args = [],","      index = this.getFilesFor(pos).index;","    word = normalize(word);","","    return index","      .lookup(word)","      .then(function(record) {","        var result = !!record;","        args.push(result, word);","        profile && args.push(new Date() - start);","        nextTick(callback, args);","        return result;","      });","  };","}","","","/**"," * getX() factory function"," *"," * @param isFn {function} - an isX() function"," * @returns {Function}"," */","function get(isFn) {","  return function(text, callback, _noprofile) {","    var profile = this.options.profile && !_noprofile,","      start = profile && new Date(),","      words = this.parse(text),","      results = [],","      self = this;","","    //if (!n) return (process.nextTick(done),0);","    return Promise","      .all(words.map(exec))","      .then(done);","","    function exec(word) {","      return self[isFn]","        .call(self, word, null, /*_noprofile*/ true)","        .then(function collect(result) {","          result && results.push(word);","        });","    }","","    function done(){","      var args = [results];","      profile && args.push(new Date() - start);","      nextTick(callback, args);","      return results;","    }","  };","}","","// setImmediate executes callback AFTER promise handlers.","// Without it, exceptions in callback may be caught by Promise.","function nextTick(fn, args) {","  if (fn) {","    fn.apply(null, args);","  }","}","","","/**"," * @class WordPOS"," * @param options {object} -- @see WordPOS.defaults"," * @constructor"," */","var WordPOS = function(options) {","  var dictPath;","","  this.options = _.defaults({}, _.isObject(options) && options || {}, {","    dictPath: WNdb.path","  }, WordPOS.defaults);","","  dictPath = this.options.dictPath;","","  this.nounIndex = new IndexFile(dictPath, 'noun');","  this.verbIndex = new IndexFile(dictPath, 'verb');","  this.adjIndex = new IndexFile(dictPath, 'adj');","  this.advIndex = new IndexFile(dictPath, 'adv');","","  this.nounData = new DataFile(dictPath, 'noun');","  this.verbData = new DataFile(dictPath, 'verb');","  this.adjData = new DataFile(dictPath, 'adj');","  this.advData = new DataFile(dictPath, 'adv');","","  // define randX() functions","  require('./rand').init(this);","","  if (_.isArray(this.options.stopwords)) {","    this.options.stopwords = makeStopwordString(this.options.stopwords);","  }","};","","","WordPOS.defaults = {","  /**","   * path to WordNet data (override only if not using wordnet-db)","   */","  dictPath: '',","","  /**","   * enable profiling, time in msec returned as second argument in callback","   */","  profile: false,","","  /**","   * if true, exclude standard stopwords.","   * if array, stopwords to exclude, eg, ['all','of','this',...]","   * if false, do not filter any stopwords.","   */","  stopwords: true","};","","var wordposProto = WordPOS.prototype;","","/**"," * lookup a word in all indexes"," *"," * @param word {string} - search word"," * @param callback {Function} (optional) - callback with (results, word) signature"," * @returns {Promise}"," */","wordposProto.lookup = function(word, callback) {","  var self = this,","    results = [],","    profile = this.options.profile,","    start = profile && new Date(),","    methods = ['lookupAdverb', 'lookupAdjective', 'lookupVerb', 'lookupNoun'];","","  return Promise","    .all(methods.map(exec))","    .then(done)","    .catch(error);","","  function exec(method) {","    return self[ method ]","      .call(self, word)","      .then(function collect(result){","        results = results.concat(result);","      });","  }","","  function done() {","    var args = [results, word];","    profile && args.push(new Date() - start);","    nextTick(callback, args);","    return results;","  }","","  function error(err) {","    nextTick(callback, [[], word]);","    throw err;","  }","};","","","/**"," * getPOS() - Find all POS for all words in given string"," *"," * @param text {string} - words to lookup for POS"," * @param callback {function} (optional) - receives object with words broken into POS or 'rest', ie,"," * \t    Object: {nouns:[], verbs:[], adjectives:[], adverbs:[], rest:[]}"," * @return Promise - resolve function receives data object"," */","wordposProto.getPOS = function(text, callback) {","  var self = this,","    data = {nouns:[], verbs:[], adjectives:[], adverbs:[], rest:[]},","    profile = this.options.profile,","    start = profile && new Date(),","    words = this.parse(text),","    methods = ['getAdverbs', 'getAdjectives', 'getVerbs', 'getNouns'];","","  return Promise","    .all(methods.map(exec))","    .then(done)","    .catch(error);","","  function exec(method) {","    return self[ method ]","      .call(self, text, null, true)","      .then(function collect(results) {","        // getAdjectives --> adjectives","        var pos = method.replace('get','').toLowerCase();","        data[ pos ] =  results;","      });","  }","","  function done() {","    var matches = _(data).chain()","      .values()","      .flatten()","      .uniq()","      .value(),","      args = [data];","","    data.rest =  _(words).difference(matches);","","    profile && args.push(new Date() - start);","    nextTick(callback, args);","    return data;","  }","","  function error(err) {","    nextTick(callback, []);","    throw err;","  }","};","","/**"," * get index and data files for given pos"," *"," * @param pos {string} - n/v/a/r"," * @returns {object} - keys {index, data}"," */","wordposProto.getFilesFor = function (pos) {","  switch(pos) {","    case 'n':","      return {index: this.nounIndex, data: this.nounData};","    case 'v':","      return {index: this.verbIndex, data: this.verbData};","    case 'a': case 's':","    return {index: this.adjIndex, data: this.adjData};","    case 'r':","      return {index: this.advIndex, data: this.advData};","  }","  return {};","};","","","/**"," * lookupX() - Lookup word definition if already know POS"," * @see lookup"," */","wordposProto.lookupAdjective = lookup('a');","wordposProto.lookupAdverb = lookup('r');","wordposProto.lookupNoun = lookup('n');","wordposProto.lookupVerb = lookup('v');","","/**"," * isX() - Test if word is given POS"," * @see is"," */","wordposProto.isAdjective = is('a');","wordposProto.isAdverb = is('r');","wordposProto.isNoun = is('n');","wordposProto.isVerb = is('v');","","/**"," * getX() - Find all words in string that are given POS"," * @see get"," */","wordposProto.getAdjectives = get('isAdjective');","wordposProto.getAdverbs = get('isAdverb');","wordposProto.getNouns = get('isNoun');","wordposProto.getVerbs = get('isVerb');","","/**"," * parse - get deduped, less stopwords"," *"," * @param text {string|array} - string of words to parse.  If array is given, it is left in tact."," * @returns {array}"," */","wordposProto.parse = prepText;","","","/**"," * seek - get record at offset for pos"," *"," * @param offset {number} - synset offset"," * @param pos {string} - POS a/r/n/v"," * @param callback {function} - optional callback"," * @returns Promise"," */","wordposProto.seek = function(offset, pos, callback){","  offset = Number(offset);","  if (_.isNaN(offset) || offset <= 0) return error('offset must be valid positive number.');","","  var data = this.getFilesFor(pos).data;","  if (!data) return error('Incorrect POS - 2nd argument must be a, r, n or v.');","","  return data.lookup(offset, callback);","","  function error(msg) {","    var err = new Error(msg);","    callback && callback(err, {});","    return Promise.reject(err);","  }","};","","","/**"," * access to WordNet DB"," * @type {object}"," */","WordPOS.WNdb = WNdb;","","/**"," * access to stopwords"," * @type {Array}"," */","WordPOS.stopwords = stopwords;","","","module.exports = WordPOS;",""],"l":{"12":1,"21":1,"22":0,"25":1,"26":1,"29":1,"30":0,"33":1,"34":0,"37":1,"38":0,"39":0,"40":0,"41":0,"52":1,"53":4,"54":0,"59":0,"62":0,"64":0,"66":0,"69":0,"74":1,"75":0,"76":0,"78":0,"81":0,"82":0,"83":0,"94":1,"95":4,"97":0,"101":0,"103":0,"106":0,"107":0,"108":0,"109":0,"110":0,"122":1,"123":4,"124":0,"131":0,"135":1,"136":0,"139":0,"143":1,"144":0,"145":0,"146":0,"147":0,"154":1,"155":0,"156":0,"166":1,"167":0,"169":0,"173":0,"175":0,"176":0,"177":0,"178":0,"180":0,"181":0,"182":0,"183":0,"186":0,"188":0,"189":0,"194":1,"213":1,"222":1,"223":0,"229":0,"234":1,"235":0,"238":0,"242":1,"243":0,"244":0,"245":0,"246":0,"249":1,"250":0,"251":0,"264":1,"265":0,"272":0,"277":1,"278":0,"282":0,"283":0,"287":1,"288":0,"295":0,"297":0,"298":0,"299":0,"302":1,"303":0,"304":0,"314":1,"315":0,"317":0,"319":0,"321":0,"323":0,"325":0,"333":1,"334":1,"335":1,"336":1,"342":1,"343":1,"344":1,"345":1,"351":1,"352":1,"353":1,"354":1,"362":1,"373":1,"374":0,"375":0,"377":0,"378":0,"380":0,"382":1,"383":0,"384":0,"385":0,"394":1,"400":1,"403":1}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/lib/natural/util/stopwords.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/lib/natural/util/stopwords.js","s":{"1":1,"2":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":25,"column":0},"end":{"line":38,"column":54}},"2":{"start":{"line":41,"column":0},"end":{"line":41,"column":22}}},"branchMap":{},"code":["/*","Copyright (c) 2011, Chris Umbel","","Permission is hereby granted, free of charge, to any person obtaining a copy","of this software and associated documentation files (the \"Software\"), to deal","in the Software without restriction, including without limitation the rights","to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","copies of the Software, and to permit persons to whom the Software is","furnished to do so, subject to the following conditions:","","The above copyright notice and this permission notice shall be included in","all copies or substantial portions of the Software.","","THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","THE SOFTWARE.","*/","","// a list of commonly used words that have little meaning and can be excluded","// from analysis.","var words = [","    'about', 'after', 'all', 'also', 'am', 'an', 'and', 'another', 'any', 'are', 'as', 'at', 'be',","    'because', 'been', 'before', 'being', 'between', 'both', 'but', 'by', 'came', 'can',","    'come', 'could', 'did', 'do', 'each', 'for', 'from', 'get', 'got', 'has', 'had',","    'he', 'have', 'her', 'here', 'him', 'himself', 'his', 'how', 'if', 'in', 'into',","    'is', 'it', 'like', 'make', 'many', 'me', 'might', 'more', 'most', 'much', 'must',","    'my', 'never', 'now', 'of', 'on', 'only', 'or', 'other', 'our', 'out', 'over',","    'said', 'same', 'see', 'should', 'since', 'some', 'still', 'such', 'take', 'than',","    'that', 'the', 'their', 'them', 'then', 'there', 'these', 'they', 'this', 'those',","    'through', 'to', 'too', 'under', 'up', 'very', 'was', 'way', 'we', 'well', 'were',","    'what', 'where', 'which', 'while', 'who', 'with', 'would', 'you', 'your',","    'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',","    'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '$', '1',","    '2', '3', '4', '5', '6', '7', '8', '9', '0', '_'];","    ","// tell the world about the noise words.    ","exports.words = words;",""],"l":{"25":1,"41":1}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/src/dataFile.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/src/dataFile.js","s":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":1,"65":0,"66":0,"67":0,"68":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":1,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":1,"86":1,"87":1,"88":1,"89":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"fnMap":{"1":{"name":"dataCheck","line":22,"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":35}}},"2":{"name":"lineDataToJSON","line":36,"loc":{"start":{"line":36,"column":0},"end":{"line":36,"column":40}}},"3":{"name":"readLocation","line":93,"loc":{"start":{"line":93,"column":0},"end":{"line":93,"column":42}}},"4":{"name":"(anonymous_4)","line":101,"loc":{"start":{"line":101,"column":22},"end":{"line":101,"column":43}}},"5":{"name":"readChunk","line":111,"loc":{"start":{"line":111,"column":2},"end":{"line":111,"column":30}}},"6":{"name":"(anonymous_6)","line":114,"loc":{"start":{"line":114,"column":42},"end":{"line":114,"column":64}}},"7":{"name":"lookup","line":139,"loc":{"start":{"line":139,"column":0},"end":{"line":139,"column":35}}},"8":{"name":"(anonymous_8)","line":145,"loc":{"start":{"line":145,"column":21},"end":{"line":145,"column":47}}},"9":{"name":"(anonymous_9)","line":147,"loc":{"start":{"line":147,"column":11},"end":{"line":147,"column":29}}},"10":{"name":"done","line":155,"loc":{"start":{"line":155,"column":4},"end":{"line":155,"column":30}}},"11":{"name":"serialize","line":168,"loc":{"start":{"line":168,"column":2},"end":{"line":168,"column":33}}},"12":{"name":"openFile","line":172,"loc":{"start":{"line":172,"column":2},"end":{"line":172,"column":22}}},"13":{"name":"closeFile","line":182,"loc":{"start":{"line":182,"column":2},"end":{"line":182,"column":23}}},"14":{"name":"promisifyInto","line":198,"loc":{"start":{"line":198,"column":0},"end":{"line":198,"column":32}}},"15":{"name":"(anonymous_15)","line":199,"loc":{"start":{"line":199,"column":9},"end":{"line":199,"column":22}}},"16":{"name":"(anonymous_16)","line":200,"loc":{"start":{"line":200,"column":11},"end":{"line":200,"column":22}}},"17":{"name":"(anonymous_17)","line":201,"loc":{"start":{"line":201,"column":25},"end":{"line":201,"column":52}}},"18":{"name":"(anonymous_18)","line":202,"loc":{"start":{"line":202,"column":11},"end":{"line":202,"column":36}}},"19":{"name":"(anonymous_19)","line":224,"loc":{"start":{"line":224,"column":15},"end":{"line":224,"column":40}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":14,"column":28}},"2":{"start":{"line":22,"column":0},"end":{"line":26,"column":1}},"3":{"start":{"line":23,"column":2},"end":{"line":24,"column":57}},"4":{"start":{"line":25,"column":2},"end":{"line":25,"column":36}},"5":{"start":{"line":36,"column":0},"end":{"line":84,"column":1}},"6":{"start":{"line":37,"column":2},"end":{"line":37,"column":87}},"7":{"start":{"line":37,"column":34},"end":{"line":37,"column":87}},"8":{"start":{"line":39,"column":2},"end":{"line":44,"column":6}},"9":{"start":{"line":46,"column":2},"end":{"line":48,"column":3}},"10":{"start":{"line":47,"column":4},"end":{"line":47,"column":37}},"11":{"start":{"line":50,"column":2},"end":{"line":50,"column":37}},"12":{"start":{"line":51,"column":2},"end":{"line":58,"column":3}},"13":{"start":{"line":52,"column":4},"end":{"line":57,"column":7}},"14":{"start":{"line":61,"column":2},"end":{"line":61,"column":39}},"15":{"start":{"line":62,"column":2},"end":{"line":62,"column":33}},"16":{"start":{"line":63,"column":2},"end":{"line":63,"column":37}},"17":{"start":{"line":64,"column":2},"end":{"line":64,"column":43}},"18":{"start":{"line":66,"column":2},"end":{"line":68,"column":3}},"19":{"start":{"line":67,"column":4},"end":{"line":67,"column":69}},"20":{"start":{"line":70,"column":2},"end":{"line":83,"column":4}},"21":{"start":{"line":93,"column":0},"end":{"line":130,"column":1}},"22":{"start":{"line":95,"column":2},"end":{"line":99,"column":29}},"23":{"start":{"line":101,"column":2},"end":{"line":109,"column":5}},"24":{"start":{"line":102,"column":4},"end":{"line":106,"column":5}},"25":{"start":{"line":104,"column":6},"end":{"line":104,"column":20}},"26":{"start":{"line":105,"column":6},"end":{"line":105,"column":13}},"27":{"start":{"line":108,"column":4},"end":{"line":108,"column":50}},"28":{"start":{"line":111,"column":2},"end":{"line":129,"column":3}},"29":{"start":{"line":112,"column":4},"end":{"line":112,"column":59}},"30":{"start":{"line":114,"column":4},"end":{"line":128,"column":7}},"31":{"start":{"line":115,"column":6},"end":{"line":115,"column":47}},"32":{"start":{"line":115,"column":18},"end":{"line":115,"column":47}},"33":{"start":{"line":117,"column":6},"end":{"line":117,"column":38}},"34":{"start":{"line":118,"column":6},"end":{"line":118,"column":34}},"35":{"start":{"line":120,"column":6},"end":{"line":123,"column":7}},"36":{"start":{"line":122,"column":8},"end":{"line":122,"column":42}},"37":{"start":{"line":125,"column":6},"end":{"line":125,"column":31}},"38":{"start":{"line":126,"column":6},"end":{"line":126,"column":47}},"39":{"start":{"line":126,"column":30},"end":{"line":126,"column":47}},"40":{"start":{"line":127,"column":6},"end":{"line":127,"column":21}},"41":{"start":{"line":139,"column":0},"end":{"line":190,"column":1}},"42":{"start":{"line":140,"column":2},"end":{"line":142,"column":33}},"43":{"start":{"line":144,"column":2},"end":{"line":144,"column":34}},"44":{"start":{"line":144,"column":14},"end":{"line":144,"column":34}},"45":{"start":{"line":145,"column":2},"end":{"line":166,"column":5}},"46":{"start":{"line":146,"column":4},"end":{"line":153,"column":19}},"47":{"start":{"line":148,"column":8},"end":{"line":148,"column":58}},"48":{"start":{"line":155,"column":4},"end":{"line":165,"column":5}},"49":{"start":{"line":156,"column":6},"end":{"line":156,"column":18}},"50":{"start":{"line":157,"column":6},"end":{"line":164,"column":7}},"51":{"start":{"line":158,"column":8},"end":{"line":158,"column":58}},"52":{"start":{"line":159,"column":8},"end":{"line":159,"column":27}},"53":{"start":{"line":161,"column":8},"end":{"line":161,"column":41}},"54":{"start":{"line":161,"column":20},"end":{"line":161,"column":41}},"55":{"start":{"line":162,"column":8},"end":{"line":162,"column":44}},"56":{"start":{"line":163,"column":8},"end":{"line":163,"column":25}},"57":{"start":{"line":168,"column":2},"end":{"line":170,"column":3}},"58":{"start":{"line":169,"column":4},"end":{"line":169,"column":27}},"59":{"start":{"line":172,"column":2},"end":{"line":180,"column":3}},"60":{"start":{"line":173,"column":4},"end":{"line":176,"column":5}},"61":{"start":{"line":175,"column":6},"end":{"line":175,"column":48}},"62":{"start":{"line":178,"column":4},"end":{"line":178,"column":20}},"63":{"start":{"line":179,"column":4},"end":{"line":179,"column":29}},"64":{"start":{"line":182,"column":2},"end":{"line":189,"column":3}},"65":{"start":{"line":183,"column":4},"end":{"line":187,"column":5}},"66":{"start":{"line":185,"column":6},"end":{"line":185,"column":28}},"67":{"start":{"line":186,"column":6},"end":{"line":186,"column":21}},"68":{"start":{"line":188,"column":4},"end":{"line":188,"column":29}},"69":{"start":{"line":198,"column":0},"end":{"line":214,"column":1}},"70":{"start":{"line":199,"column":2},"end":{"line":213,"column":3}},"71":{"start":{"line":200,"column":4},"end":{"line":212,"column":6}},"72":{"start":{"line":201,"column":6},"end":{"line":211,"column":9}},"73":{"start":{"line":202,"column":8},"end":{"line":210,"column":11}},"74":{"start":{"line":203,"column":10},"end":{"line":209,"column":11}},"75":{"start":{"line":204,"column":12},"end":{"line":204,"column":26}},"76":{"start":{"line":207,"column":12},"end":{"line":207,"column":44}},"77":{"start":{"line":208,"column":12},"end":{"line":208,"column":28}},"78":{"start":{"line":224,"column":0},"end":{"line":232,"column":2}},"79":{"start":{"line":225,"column":2},"end":{"line":225,"column":27}},"80":{"start":{"line":226,"column":2},"end":{"line":226,"column":33}},"81":{"start":{"line":227,"column":2},"end":{"line":227,"column":58}},"82":{"start":{"line":229,"column":2},"end":{"line":229,"column":56}},"83":{"start":{"line":230,"column":2},"end":{"line":230,"column":50}},"84":{"start":{"line":231,"column":2},"end":{"line":231,"column":20}},"85":{"start":{"line":238,"column":0},"end":{"line":238,"column":33}},"86":{"start":{"line":243,"column":0},"end":{"line":243,"column":35}},"87":{"start":{"line":251,"column":0},"end":{"line":256,"column":2}},"88":{"start":{"line":264,"column":0},"end":{"line":310,"column":2}},"89":{"start":{"line":312,"column":0},"end":{"line":312,"column":26}}},"branchMap":{"1":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":2},"end":{"line":37,"column":2}},{"start":{"line":37,"column":2},"end":{"line":37,"column":2}}]},"2":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":4},"end":{"line":102,"column":4}},{"start":{"line":102,"column":4},"end":{"line":102,"column":4}}]},"3":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":6},"end":{"line":115,"column":6}},{"start":{"line":115,"column":6},"end":{"line":115,"column":6}}]},"4":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":6},"end":{"line":120,"column":6}},{"start":{"line":120,"column":6},"end":{"line":120,"column":6}}]},"5":{"line":120,"type":"binary-expr","locations":[{"start":{"line":120,"column":10},"end":{"line":120,"column":15}},{"start":{"line":120,"column":19},"end":{"line":120,"column":29}},{"start":{"line":120,"column":33},"end":{"line":120,"column":57}}]},"6":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":6},"end":{"line":126,"column":6}},{"start":{"line":126,"column":6},"end":{"line":126,"column":6}}]},"7":{"line":126,"type":"binary-expr","locations":[{"start":{"line":126,"column":10},"end":{"line":126,"column":20}},{"start":{"line":126,"column":24},"end":{"line":126,"column":28}}]},"8":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":2},"end":{"line":144,"column":2}},{"start":{"line":144,"column":2},"end":{"line":144,"column":2}}]},"9":{"line":157,"type":"if","locations":[{"start":{"line":157,"column":6},"end":{"line":157,"column":6}},{"start":{"line":157,"column":6},"end":{"line":157,"column":6}}]},"10":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":8},"end":{"line":158,"column":16}},{"start":{"line":158,"column":20},"end":{"line":158,"column":57}}]},"11":{"line":158,"type":"cond-expr","locations":[{"start":{"line":158,"column":50},"end":{"line":158,"column":52}},{"start":{"line":158,"column":54},"end":{"line":158,"column":56}}]},"12":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":8},"end":{"line":161,"column":8}},{"start":{"line":161,"column":8},"end":{"line":161,"column":8}}]},"13":{"line":162,"type":"binary-expr","locations":[{"start":{"line":162,"column":8},"end":{"line":162,"column":16}},{"start":{"line":162,"column":20},"end":{"line":162,"column":43}}]},"14":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":4},"end":{"line":173,"column":4}},{"start":{"line":173,"column":4},"end":{"line":173,"column":4}}]},"15":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":4},"end":{"line":183,"column":4}},{"start":{"line":183,"column":4},"end":{"line":183,"column":4}}]},"16":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":10},"end":{"line":203,"column":10}},{"start":{"line":203,"column":10},"end":{"line":203,"column":10}}]},"17":{"line":207,"type":"binary-expr","locations":[{"start":{"line":207,"column":12},"end":{"line":207,"column":19}},{"start":{"line":207,"column":23},"end":{"line":207,"column":43}}]}},"code":["/*!"," * dataFile.js"," *"," * Copyright (c) 2012-2016 mooster@42at.com"," * https://github.com/moos/wordpos"," *"," * Portions: Copyright (c) 2011, Chris Umbel"," *"," * Released under MIT license"," */","","var fs = require('fs'),","  path = require('path'),","  _ = require('underscore');","","/**"," * sanity check read data - line must start with zero-padded location"," *"," * @param line {string} - line data read"," * @return {boolean} true if line data is good"," */","function dataCheck(line, location) {","  var pad = '00000000', // 8 zeros","    padded = String(pad + location).slice( - pad.length);","  return line.indexOf(padded) === 0;","}","","/**"," * parse a single data file line, returning data object"," *"," * @param line {string} - a single line from WordNet data file"," * @returns {object}"," *"," * Credit for this routine to https://github.com/NaturalNode/natural"," */","function lineDataToJSON(line, location) {","  if (!dataCheck(line, location)) return new Error('Bad data at location ' + location);","","  var data = line.split('| '),","    tokens = data[0].split(/\\s+/),","    ptrs = [],","    wCnt = parseInt(tokens[3], 16),","    synonyms = [],","    i;","","  for(i = 0; i < wCnt; i++) {","    synonyms.push(tokens[4 + i * 2]);","  }","","  var ptrOffset = (wCnt - 1) * 2 + 6;","  for(i = 0; i < parseInt(tokens[ptrOffset], 10); i++) {","    ptrs.push({","      pointerSymbol: tokens[ptrOffset + 1 + i * 4],","      synsetOffset: parseInt(tokens[ptrOffset + 2 + i * 4], 10),","      pos: tokens[ptrOffset + 3 + i * 4],","      sourceTarget: tokens[ptrOffset + 4 + i * 4]","    });","  }","","  // break \"gloss\" into definition vs. examples","  var glossArray = data[1].split(\"; \");","  var definition = glossArray[0];","  var examples = glossArray.slice(1);","  var lexFilenum = parseInt(tokens[1], 10);","","  for (var k = 0; k < examples.length; k++) {","    examples[k] = examples[k].replace(/\\\"/g,'').replace(/\\s\\s+/g,'');","  }","","  return {","    synsetOffset: parseInt(tokens[0], 10),","    lexFilenum: lexFilenum,","    lexName: DataFile.LEX_NAMES[ lexFilenum ],","    pos: tokens[2],","    wCnt: wCnt,","    lemma: tokens[4],","    synonyms: synonyms,","    lexId: tokens[5],","    ptrs: ptrs,","    gloss: data[1],","    def: definition,","    exp: examples","  };","}","","/**"," * read data file at location (bound to a data file)."," * Reads nominal length and checks for EOL.  Continue reading until EOL."," *"," * @param location {Number} - seek location"," * @param callback {function} - callback function"," */","function readLocation(location, callback) {","  //console.log('## read location ', this.fileName, location);","  var","    file = this,","    str = '',","    len = file.nominalLineLength,","    buffer = new Buffer(len);   // TODO @deprecated as of node 6.0","","  readChunk(location, function(err, count) {","    if (err) {","      //console.log(err);","      callback(err);","      return;","    }","    //console.log('  read %d bytes at <%d>', count, location);","    callback(null, lineDataToJSON(str, location));","  });","","  function readChunk(pos, cb) {","    var nonDataErr = new Error('no data at offset ' + pos);","","    fs.read(file.fd, buffer, 0, len, pos, function (err, count) {","      if (!count) return cb(nonDataErr, count);","","      str += buffer.toString('ascii');","      var eol = str.indexOf('\\n');","      //console.log('  -- read %d bytes at <%d>', count, pos, eol);","      if (count && eol === -1 && len < file.maxLineLength) {","        // continue reading","        return readChunk(pos + count, cb);","      }","","      str = str.substr(0, eol);","      if (str === '' && !err) err = nonDataErr;","      cb(err, count);","    });","  }","}","","/**"," * main lookup function"," *"," * @param offsets {array} - array of offsets to lookup (obtained from index.find())"," * @param callback{function} (optional) - callback function"," * @returns {Promise}"," */","function lookup(offsets, callback) {","  var results = [],","    self = this,","    single = !_.isArray(offsets);","","  if (single) offsets = [offsets];","  return new Promise(function(resolve, reject) {","    offsets","      .map(function (offset) {","        return _.partial(readLocation.bind(self), offset);","      })","      .map(promisifyInto(results))","      .reduce(serialize, openFile())","      .then(done)","      .catch(done);","","    function done(lastResult) {","      closeFile();","      if (lastResult instanceof Error) {","        callback && callback(lastResult, single ? {} :[]);","        reject(lastResult);","      } else {","        if (single) results = results[0];","        callback && callback(null, results);","        resolve(results);","      }","    }","  });","","  function serialize(prev, next) {","    return prev.then(next);","  }","","  function openFile() {","    if (!self.fd) {","      // console.log(' ... opening', self.filePath);","      self.fd = fs.openSync(self.filePath, 'r');","    }","    // ref count so we know when to close the main index file","    ++self.refcount;","    return Promise.resolve();","  }","","  function closeFile() {","    if (--self.refcount === 0) {","      // console.log(' ... closing', self.filePath);","      fs.closeSync(self.fd);","      self.fd = null;","    }","    return Promise.resolve();","  }","}","","/**"," * turn ordinary function into a promising one!"," *"," * @param collect {Array} - used to collect results"," * @returns {Function}"," */","function promisifyInto(collect) {","  return function(fn) {","    return function() {","      return new Promise(function (resolve, reject) {","        fn(function (error, result) {   // Note: callback signature!","          if (error) {","            reject(error);","          }","          else {","            collect && collect.push(result);","            resolve(result);","          }","        });","      });","    };","  }","}","","","/**"," * DataFile class"," *"," * @param dictPath {string} - path to dict folder"," * @param name {string} - POS name"," * @constructor"," */","var DataFile = function(dictPath, name) {","  this.dictPath = dictPath;","  this.fileName = 'data.' + name;","  this.filePath = path.join(this.dictPath, this.fileName);","","  this.maxLineLength = DataFile.MAX_LINE_LENGTH[ name ];","  this.nominalLineLength = MAX_SINGLE_READ_LENGTH;","  this.refcount = 0;","};","","/**"," * maximum read length at a time"," * @type {Number}"," */","var MAX_SINGLE_READ_LENGTH = 512;","","/**"," * lookup"," */","DataFile.prototype.lookup = lookup;","","","/**"," * maximum line length in each data file - used to optimize reads"," *"," * wc -L data.adv as of v3.1"," */","DataFile.MAX_LINE_LENGTH = {","  noun: 12972,","  verb: 7713,","  adj: 2794,","  adv: 638","};","","/**"," * map of lexFilenum to lex names"," *"," * @see https://wordnet.princeton.edu/wordnet/man/lexnames.5WN.html"," * @type {string[]}"," */","DataFile.LEX_NAMES = [","  'adj.all',","  'adj.pert',","  'adv.all',","  'noun.Tops',","  'noun.act',","  'noun.animal',","  'noun.artifact',","  'noun.attribute',","  'noun.body',","  'noun.cognition',","  'noun.communication',","  'noun.event',","  'noun.feeling',","  'noun.food',","  'noun.group',","  'noun.location',","  'noun.motive',","  'noun.object',","  'noun.person',","  'noun.phenomenon',","  'noun.plant',","  'noun.possession',","  'noun.process',","  'noun.quantity',","  'noun.relation',","  'noun.shape',","  'noun.state',","  'noun.substance',","  'noun.time',","  'verb.body',","  'verb.change',","  'verb.cognition',","  'verb.communication',","  'verb.competition',","  'verb.consumption',","  'verb.contact',","  'verb.creation',","  'verb.emotion',","  'verb.motion',","  'verb.perception',","  'verb.possession',","  'verb.social',","  'verb.stative',","  'verb.weather',","  'adj.ppl'","];","","module.exports = DataFile;",""],"l":{"12":1,"22":1,"23":0,"25":0,"36":1,"37":0,"39":0,"46":0,"47":0,"50":0,"51":0,"52":0,"61":0,"62":0,"63":0,"64":0,"66":0,"67":0,"70":0,"93":1,"95":0,"101":0,"102":0,"104":0,"105":0,"108":0,"111":1,"112":0,"114":0,"115":0,"117":0,"118":0,"120":0,"122":0,"125":0,"126":0,"127":0,"139":1,"140":0,"144":0,"145":0,"146":0,"148":0,"155":1,"156":0,"157":0,"158":0,"159":0,"161":0,"162":0,"163":0,"168":1,"169":0,"172":1,"173":0,"175":0,"178":0,"179":0,"182":1,"183":0,"185":0,"186":0,"188":0,"198":1,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"207":0,"208":0,"224":1,"225":0,"226":0,"227":0,"229":0,"230":0,"231":0,"238":1,"243":1,"251":1,"264":1,"312":1}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/src/indexFile.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/src/indexFile.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":1,"69":1,"70":1,"71":1,"72":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"fnMap":{"1":{"name":"loadFastIndex","line":29,"loc":{"start":{"line":29,"column":0},"end":{"line":29,"column":34}}},"2":{"name":"readIndexForKey","line":50,"loc":{"start":{"line":50,"column":0},"end":{"line":50,"column":47}}},"3":{"name":"(anonymous_3)","line":58,"loc":{"start":{"line":58,"column":44},"end":{"line":58,"column":64}}},"4":{"name":"readIndexBetweenKeys","line":75,"loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":65}}},"5":{"name":"(anonymous_5)","line":85,"loc":{"start":{"line":85,"column":44},"end":{"line":85,"column":64}}},"6":{"name":"find","line":101,"loc":{"start":{"line":101,"column":0},"end":{"line":101,"column":32}}},"7":{"name":"(anonymous_7)","line":108,"loc":{"start":{"line":108,"column":54},"end":{"line":108,"column":64}}},"8":{"name":"collector","line":118,"loc":{"start":{"line":118,"column":2},"end":{"line":118,"column":59}}},"9":{"name":"(anonymous_9)","line":120,"loc":{"start":{"line":120,"column":23},"end":{"line":120,"column":37}}},"10":{"name":"lookup","line":145,"loc":{"start":{"line":145,"column":0},"end":{"line":145,"column":32}}},"11":{"name":"(anonymous_11)","line":148,"loc":{"start":{"line":148,"column":21},"end":{"line":148,"column":46}}},"12":{"name":"(anonymous_12)","line":149,"loc":{"start":{"line":149,"column":20},"end":{"line":149,"column":38}}},"13":{"name":"initIndex","line":184,"loc":{"start":{"line":184,"column":0},"end":{"line":184,"column":25}}},"14":{"name":"(anonymous_14)","line":212,"loc":{"start":{"line":212,"column":16},"end":{"line":212,"column":41}}}},"statementMap":{"1":{"start":{"line":14,"column":0},"end":{"line":19,"column":17}},"2":{"start":{"line":29,"column":0},"end":{"line":40,"column":1}},"3":{"start":{"line":30,"column":2},"end":{"line":31,"column":16}},"4":{"start":{"line":32,"column":2},"end":{"line":38,"column":3}},"5":{"start":{"line":33,"column":4},"end":{"line":33,"column":58}},"6":{"start":{"line":36,"column":4},"end":{"line":36,"column":76}},"7":{"start":{"line":37,"column":4},"end":{"line":37,"column":12}},"8":{"start":{"line":39,"column":2},"end":{"line":39,"column":14}},"9":{"start":{"line":50,"column":0},"end":{"line":63,"column":1}},"10":{"start":{"line":51,"column":2},"end":{"line":56,"column":29}},"11":{"start":{"line":58,"column":2},"end":{"line":62,"column":5}},"12":{"start":{"line":59,"column":5},"end":{"line":59,"column":38}},"13":{"start":{"line":59,"column":14},"end":{"line":59,"column":38}},"14":{"start":{"line":61,"column":5},"end":{"line":61,"column":22}},"15":{"start":{"line":75,"column":0},"end":{"line":90,"column":1}},"16":{"start":{"line":76,"column":2},"end":{"line":82,"column":29}},"17":{"start":{"line":85,"column":2},"end":{"line":89,"column":5}},"18":{"start":{"line":86,"column":5},"end":{"line":86,"column":38}},"19":{"start":{"line":86,"column":14},"end":{"line":86,"column":38}},"20":{"start":{"line":88,"column":5},"end":{"line":88,"column":22}},"21":{"start":{"line":101,"column":0},"end":{"line":134,"column":1}},"22":{"start":{"line":102,"column":2},"end":{"line":105,"column":28}},"23":{"start":{"line":107,"column":2},"end":{"line":107,"column":40}},"24":{"start":{"line":108,"column":2},"end":{"line":108,"column":84}},"25":{"start":{"line":108,"column":30},"end":{"line":108,"column":84}},"26":{"start":{"line":108,"column":66},"end":{"line":108,"column":81}},"27":{"start":{"line":111,"column":2},"end":{"line":113,"column":33}},"28":{"start":{"line":116,"column":2},"end":{"line":116,"column":62}},"29":{"start":{"line":118,"column":2},"end":{"line":133,"column":3}},"30":{"start":{"line":119,"column":4},"end":{"line":123,"column":55}},"31":{"start":{"line":121,"column":8},"end":{"line":121,"column":51}},"32":{"start":{"line":126,"column":4},"end":{"line":126,"column":42}},"33":{"start":{"line":126,"column":20},"end":{"line":126,"column":42}},"34":{"start":{"line":128,"column":4},"end":{"line":130,"column":77}},"35":{"start":{"line":132,"column":4},"end":{"line":132,"column":21}},"36":{"start":{"line":145,"column":0},"end":{"line":176,"column":1}},"37":{"start":{"line":146,"column":2},"end":{"line":146,"column":18}},"38":{"start":{"line":148,"column":2},"end":{"line":175,"column":5}},"39":{"start":{"line":149,"column":4},"end":{"line":174,"column":7}},"40":{"start":{"line":150,"column":6},"end":{"line":151,"column":10}},"41":{"start":{"line":153,"column":6},"end":{"line":170,"column":7}},"42":{"start":{"line":154,"column":8},"end":{"line":154,"column":36}},"43":{"start":{"line":156,"column":8},"end":{"line":157,"column":38}},"44":{"start":{"line":157,"column":10},"end":{"line":157,"column":38}},"45":{"start":{"line":159,"column":8},"end":{"line":160,"column":73}},"46":{"start":{"line":160,"column":10},"end":{"line":160,"column":73}},"47":{"start":{"line":162,"column":8},"end":{"line":169,"column":10}},"48":{"start":{"line":172,"column":6},"end":{"line":172,"column":40}},"49":{"start":{"line":173,"column":6},"end":{"line":173,"column":27}},"50":{"start":{"line":184,"column":0},"end":{"line":203,"column":1}},"51":{"start":{"line":185,"column":2},"end":{"line":186,"column":9}},"52":{"start":{"line":188,"column":2},"end":{"line":191,"column":3}},"53":{"start":{"line":189,"column":4},"end":{"line":189,"column":57}},"54":{"start":{"line":190,"column":4},"end":{"line":190,"column":22}},"55":{"start":{"line":194,"column":2},"end":{"line":194,"column":87}},"56":{"start":{"line":194,"column":19},"end":{"line":194,"column":87}},"57":{"start":{"line":196,"column":2},"end":{"line":196,"column":31}},"58":{"start":{"line":197,"column":2},"end":{"line":197,"column":67}},"59":{"start":{"line":198,"column":2},"end":{"line":198,"column":30}},"60":{"start":{"line":200,"column":2},"end":{"line":200,"column":21}},"61":{"start":{"line":201,"column":2},"end":{"line":201,"column":27}},"62":{"start":{"line":202,"column":2},"end":{"line":202,"column":37}},"63":{"start":{"line":212,"column":0},"end":{"line":217,"column":2}},"64":{"start":{"line":213,"column":2},"end":{"line":213,"column":27}},"65":{"start":{"line":214,"column":2},"end":{"line":214,"column":34}},"66":{"start":{"line":215,"column":2},"end":{"line":215,"column":58}},"67":{"start":{"line":216,"column":2},"end":{"line":216,"column":18}},"68":{"start":{"line":219,"column":0},"end":{"line":219,"column":36}},"69":{"start":{"line":220,"column":0},"end":{"line":220,"column":32}},"70":{"start":{"line":226,"column":0},"end":{"line":226,"column":54}},"71":{"start":{"line":233,"column":0},"end":{"line":233,"column":15}},"72":{"start":{"line":237,"column":0},"end":{"line":237,"column":27}}},"branchMap":{"1":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":5},"end":{"line":59,"column":5}},{"start":{"line":59,"column":5},"end":{"line":59,"column":5}}]},"2":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":10},"end":{"line":78,"column":16}},{"start":{"line":78,"column":20},"end":{"line":78,"column":28}}]},"3":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":5},"end":{"line":86,"column":5}},{"start":{"line":86,"column":5},"end":{"line":86,"column":5}}]},"4":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":2},"end":{"line":108,"column":2}},{"start":{"line":108,"column":2},"end":{"line":108,"column":2}}]},"5":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":4},"end":{"line":126,"column":4}},{"start":{"line":126,"column":4},"end":{"line":126,"column":4}}]},"6":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":6},"end":{"line":153,"column":6}},{"start":{"line":153,"column":6},"end":{"line":153,"column":6}}]},"7":{"line":172,"type":"binary-expr","locations":[{"start":{"line":172,"column":6},"end":{"line":172,"column":14}},{"start":{"line":172,"column":18},"end":{"line":172,"column":39}}]},"8":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":2},"end":{"line":188,"column":2}},{"start":{"line":188,"column":2},"end":{"line":188,"column":2}}]},"9":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":2},"end":{"line":194,"column":2}},{"start":{"line":194,"column":2},"end":{"line":194,"column":2}}]}},"code":["/*!"," * indexFile.js"," *"," * \t\timplements fast index lookup of WordNet's index files"," *"," * Copyright (c) 2012-2016 mooster@42at.com"," * https://github.com/moos/wordpos"," *"," * Portions: Copyright (c) 2011, Chris Umbel"," *"," * Released under MIT license"," */","","var _ = require('underscore')._,","  util = require('util'),","  path = require('path'),","  fs = require('fs'),","  piper = require('./piper'),","  KEY_LENGTH = 3;","","","/**"," * load fast index bucket data"," *"," * @param dir {string} - dir path of index files"," * @param name {string} - name of index file, eg, 'index.verb'"," * @returns {Object} - fast index data object"," */","function loadFastIndex(dir, name) {","  var jsonFile = path.join(dir, 'fast-' + name + '.json'),","    data = null;","  try{","    data = JSON.parse( fs.readFileSync(jsonFile,'utf8') );","    //console.log('loaded %d buckets for %s', data.stats.buckets, data.name);","  } catch(e) {","    console.error('Error with fast index file. Try reinstalling from npm!');","    throw e;","  }","  return data;","}","","/**"," * read index file using fast index data at key"," *"," * @param key {string} - 3-char key into fast index"," * @param index {object} - index file object"," * @param callback {function} - function receives buffer of data read"," * @returns none"," */","function readIndexForKey(key, index, callback) {","  var data = index.fastIndex,","    offset = data.offsets[key][0],","    nextKey = data.offsets[key][1],","    nextOffset = data.offsets[nextKey][0],","    len = nextOffset - offset - 1,","    buffer = new Buffer(len);","","  fs.read(index.fd, buffer, 0, len, offset, function(err, count){","     if (err) return console.log(err);","     //console.log('  read %d bytes for <%s>', count, key);","     callback(buffer);","  });","}","","","/**"," * read index file using fast index data at keyStart to keyEnd (inclusive)"," *"," * @param keyStart {string} - 3-char key into fast index to begin at"," * @param keyEnd {string|null} - 3-char key into fast index to end at.  If null, reads to next key."," * @param index {object} - index file object"," * @param callback - function receives buffer of data read"," * @returns none"," */","function readIndexBetweenKeys(keyStart, keyEnd, index, callback) {","  var data = index.fastIndex,","    offset = data.offsets[keyStart][0],","    end = keyEnd || keyStart,","    nextKey = data.offsets[end][1],","    nextOffset = data.offsets[nextKey][0],","    len = nextOffset - offset - 1,","    buffer = new Buffer(len);","","  //console.log('### readIndexBetweenKeys', keyStart, keyEnd, nextKey, len)","  fs.read(index.fd, buffer, 0, len, offset, function(err, count){","     if (err) return console.log(err);","     // console.log('  read %d bytes for <%s>', count, keyStart);","     callback(buffer);","  });","}","","/**"," * find a search term in an index file (using fast index)"," *"," * Calls to same bucket are queued for callback using the piper."," *"," * @param search {string} - word to search for"," * @param callback {function} - callback receives found line and tokens"," * @returns none"," */","function find(search, callback) {","  var self = this,","    data = this.fastIndex,","    readCallbacks = this.callbackQueue,","    miss = {status: 'miss'};","","  var key = search.slice(0, KEY_LENGTH);","  if (!(key in data.offsets)) return process.nextTick(function(){ callback(miss) });","","  // prepare the piper","  var task = 'find:' + key,","    args = [key, this],","    context = [search, callback]; // last arg MUST be callback","","  // pay the piper","  this.piper(task, readIndexForKey, args, context, collector);","","  function collector(_key, index, search, callback, buffer){","    var lines = buffer.toString().split('\\n'),","      keys = lines.map(function(line){","        return line.substring(0,line.indexOf(' '));","      }),","      ind = _.indexOf(keys, search, /*isSorted*/ true);\t// binary search!","","    //console.log(' %s is %d', search, ind);","    if (ind === -1) return callback(miss);","","    var tokens = lines[ind].split(/\\s+/),","      key = tokens[0],","      result = {status: 'hit', key: key, 'line': lines[ind], tokens: tokens};","","    callback(result);","  }","}","","/**"," * find a word and prepare its lexical record"," *"," * @param word {string} - search word"," * @param callback {function} - callback function receives result"," * @returns none"," *"," * Credit for this routine to https://github.com/NaturalNode/natural"," */","function lookup(word, callback) {","  var self = this;","","  return new Promise(function(resolve, reject){","    self.find(word, function (record) {","      var indexRecord = null,","        i;","","      if (record.status == 'hit') {","        var ptrs = [], offsets = [];","","        for (i = 0; i < parseInt(record.tokens[3]); i++)","          ptrs.push(record.tokens[i]);","","        for (i = 0; i < parseInt(record.tokens[2]); i++)","          offsets.push(parseInt(record.tokens[ptrs.length + 6 + i], 10));","","        indexRecord = {","          lemma       : record.tokens[0],","          pos         : record.tokens[1],","          ptrSymbol   : ptrs,","          senseCnt    : parseInt(record.tokens[ptrs.length + 4], 10),","          tagsenseCnt : parseInt(record.tokens[ptrs.length + 5], 10),","          synsetOffset: offsets","        };","      }","","      callback && callback(indexRecord);","      resolve(indexRecord);","    });","  });","}","","","/**"," * loads fast index data and return fast index find function"," *"," * @param index {object} - the IndexFile instance"," */","function initIndex(index){","  var key = index.filePath,","    data;","","  if (!(key in cache)) {","    data = loadFastIndex(index.dictPath, index.fileName);","    cache[key] = data;","  }","","  // if no fast index data was found or was corrupt, throw","  if (!cache[key]) throw new Error('Unable to load fastIndex file: ' + index.filePath);","","  index.fastIndex = cache[key];","  index.fastIndex.indexKeys = Object.keys(index.fastIndex.offsets);","  index.fastIndex.trie = null;  // calc on demand","","  index.refcount = 0;","  index.callbackQueue = {};","  index.piper = _.bind(piper, index);","}","","/**"," * IndexFile class"," *"," * @param dictPath {string} - WordNet db dict path"," * @param name {string} - name of index: noun, verb, adj, adv"," * @constructor"," */","var IndexFile = function(dictPath, name) {","  this.dictPath = dictPath;","  this.fileName = 'index.' + name;","  this.filePath = path.join(this.dictPath, this.fileName);","  initIndex(this);","};","","IndexFile.prototype.lookup = lookup;","IndexFile.prototype.find = find;","","/**"," * export static method"," * @type {readIndexBetweenKeys}"," */","IndexFile.readIndexBetweenKeys = readIndexBetweenKeys;","","/**"," * cache of fast index data across instances of WordPOS class"," *"," * @type {object}"," */","var cache = {};","","","","module.exports = IndexFile;",""],"l":{"14":1,"29":1,"30":0,"32":0,"33":0,"36":0,"37":0,"39":0,"50":1,"51":0,"58":0,"59":0,"61":0,"75":1,"76":0,"85":0,"86":0,"88":0,"101":1,"102":0,"107":0,"108":0,"111":0,"116":0,"118":1,"119":0,"121":0,"126":0,"128":0,"132":0,"145":1,"146":0,"148":0,"149":0,"150":0,"153":0,"154":0,"156":0,"157":0,"159":0,"160":0,"162":0,"172":0,"173":0,"184":1,"185":0,"188":0,"189":0,"190":0,"194":0,"196":0,"197":0,"198":0,"200":0,"201":0,"202":0,"212":1,"213":0,"214":0,"215":0,"216":0,"219":1,"220":1,"226":1,"233":1,"237":1}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/src/piper.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/src/piper.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"piper","line":27,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":53}}},"2":{"name":"(anonymous_2)","line":56,"loc":{"start":{"line":56,"column":16},"end":{"line":56,"column":52}}}},"statementMap":{"1":{"start":{"line":13,"column":0},"end":{"line":15,"column":21}},"2":{"start":{"line":27,"column":0},"end":{"line":53,"column":1}},"3":{"start":{"line":28,"column":2},"end":{"line":30,"column":20}},"4":{"start":{"line":35,"column":2},"end":{"line":38,"column":3}},"5":{"start":{"line":36,"column":4},"end":{"line":36,"column":39}},"6":{"start":{"line":37,"column":4},"end":{"line":37,"column":11}},"7":{"start":{"line":39,"column":2},"end":{"line":39,"column":35}},"8":{"start":{"line":41,"column":2},"end":{"line":44,"column":3}},"9":{"start":{"line":43,"column":4},"end":{"line":43,"column":46}},"10":{"start":{"line":47,"column":2},"end":{"line":47,"column":18}},"11":{"start":{"line":49,"column":2},"end":{"line":49,"column":57}},"12":{"start":{"line":52,"column":2},"end":{"line":52,"column":57}},"13":{"start":{"line":56,"column":0},"end":{"line":78,"column":2}},"14":{"start":{"line":57,"column":2},"end":{"line":59,"column":19}},"15":{"start":{"line":63,"column":2},"end":{"line":68,"column":3}},"16":{"start":{"line":64,"column":4},"end":{"line":64,"column":26}},"17":{"start":{"line":67,"column":4},"end":{"line":67,"column":78}},"18":{"start":{"line":71,"column":2},"end":{"line":71,"column":29}},"19":{"start":{"line":73,"column":2},"end":{"line":77,"column":3}},"20":{"start":{"line":75,"column":4},"end":{"line":75,"column":26}},"21":{"start":{"line":76,"column":4},"end":{"line":76,"column":19}},"22":{"start":{"line":81,"column":0},"end":{"line":81,"column":23}}},"branchMap":{"1":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":2},"end":{"line":35,"column":2}},{"start":{"line":35,"column":2},"end":{"line":35,"column":2}}]},"2":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":2},"end":{"line":41,"column":2}},{"start":{"line":41,"column":2},"end":{"line":41,"column":2}}]},"3":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":2},"end":{"line":73,"column":2}},{"start":{"line":73,"column":2},"end":{"line":73,"column":2}}]}},"code":["/*!"," * piper.js"," *"," *     executes multiple async i/o tasks and pools similar callbacks,"," *     calling i/o open/close when all incoming tasks are done."," *"," * Copyright (c) 2012-2016 mooster@42at.com"," * https://github.com/moos/wordpos"," *"," * Released under MIT license"," */","","var _ = require('underscore')._,","  util = require('util'),","  fs = require('fs');","","/**"," * run single 'task' method sharing callbacks.  Method MUST take callback as LAST arg."," * piper is bound to an IndexFile."," *"," * @param task {string} - task name unique to method!"," * @param method {function} - method to execute, gets (args, ... , callback)"," * @param args {Array} - args to pass to method"," * @param context {object} - other params to remember and sent to callback"," * @param callback {function} - result callback"," */","function piper(task, method, args, context, callback){","  var readCallbacks = this.callbackQueue,","    memoArgs = _.rest(arguments, 2),","    wrappedCallback;","","   //console.log('piper', task, [method]);","","  // queue up if already reading file for this task","  if (task in readCallbacks){","    readCallbacks[task].push(memoArgs);","    return;","  }","  readCallbacks[task] = [memoArgs];","","  if (!this.fd) {","    //console.log(' ... opening', this.filePath);","    this.fd = fs.openSync(this.filePath, 'r');","  }","","  // ref count so we know when to close the main index file","  ++this.refcount;","","  wrappedCallback = _.partial(piper.wrapper, this, task);","","  // call method -- replace original callback (last arg) with wrapped one","  method.apply(null, [].concat( args, wrappedCallback ));","}","","// result is the *same* for same task","piper.wrapper = function(self, task /*, result...*/){","  var readCallbacks = self.callbackQueue,","    result = _.rest(arguments, 2),","    callback, args;","","  // live access callbacks cache in case nested cb's","  // add to the array.","  while (args = readCallbacks[task].shift()) {","    callback = args.pop(); // last arg MUST be callback","","//    console.log('>>>> pper wrapper', self.fastIndex.name, task, result.toString())","    callback.apply(null, [].concat(_.flatten(args, /*shallow*/true), result));","  }","","  // now done - delete cb cache","  delete readCallbacks[task];","","  if (--self.refcount === 0) {","    //console.log(' ... closing', self.filePath);","    fs.closeSync(self.fd);","    self.fd = null;","  }","};","","","module.exports = piper;","",""],"l":{"13":1,"27":1,"28":0,"35":0,"36":0,"37":0,"39":0,"41":0,"43":0,"47":0,"49":0,"52":0,"56":1,"57":0,"63":0,"64":0,"67":0,"71":0,"73":0,"75":0,"76":0,"81":1}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/bench/wordpos-bench.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/bench/wordpos-bench.js","s":{"1":2,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},"fnMap":{"1":{"name":"(anonymous_1)","line":22,"loc":{"start":{"line":22,"column":9},"end":{"line":22,"column":24}}},"2":{"name":"(anonymous_2)","line":26,"loc":{"start":{"line":26,"column":10},"end":{"line":26,"column":31}}},"3":{"name":"(anonymous_3)","line":34,"loc":{"start":{"line":34,"column":8},"end":{"line":34,"column":22}}},"4":{"name":"(anonymous_4)","line":39,"loc":{"start":{"line":39,"column":11},"end":{"line":39,"column":33}}},"5":{"name":"out","line":45,"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":17}}},"6":{"name":"(anonymous_6)","line":46,"loc":{"start":{"line":46,"column":27},"end":{"line":46,"column":38}}},"7":{"name":"getPOS","line":59,"loc":{"start":{"line":59,"column":0},"end":{"line":59,"column":21}}},"8":{"name":"(anonymous_8)","line":60,"loc":{"start":{"line":60,"column":23},"end":{"line":60,"column":36}}},"9":{"name":"getNouns","line":66,"loc":{"start":{"line":66,"column":0},"end":{"line":66,"column":23}}},"10":{"name":"(anonymous_10)","line":67,"loc":{"start":{"line":67,"column":25},"end":{"line":67,"column":38}}},"11":{"name":"getVerbs","line":73,"loc":{"start":{"line":73,"column":0},"end":{"line":73,"column":23}}},"12":{"name":"(anonymous_12)","line":74,"loc":{"start":{"line":74,"column":25},"end":{"line":74,"column":38}}},"13":{"name":"getAdjectives","line":80,"loc":{"start":{"line":80,"column":0},"end":{"line":80,"column":28}}},"14":{"name":"(anonymous_14)","line":81,"loc":{"start":{"line":81,"column":30},"end":{"line":81,"column":43}}},"15":{"name":"getAdverbs","line":87,"loc":{"start":{"line":87,"column":0},"end":{"line":87,"column":25}}},"16":{"name":"(anonymous_16)","line":88,"loc":{"start":{"line":88,"column":27},"end":{"line":88,"column":40}}},"17":{"name":"lookup","line":95,"loc":{"start":{"line":95,"column":0},"end":{"line":95,"column":21}}},"18":{"name":"(anonymous_18)","line":98,"loc":{"start":{"line":98,"column":21},"end":{"line":98,"column":36}}},"19":{"name":"(anonymous_19)","line":99,"loc":{"start":{"line":99,"column":25},"end":{"line":99,"column":40}}},"20":{"name":"lookupNoun","line":106,"loc":{"start":{"line":106,"column":0},"end":{"line":106,"column":25}}},"21":{"name":"(anonymous_21)","line":109,"loc":{"start":{"line":109,"column":21},"end":{"line":109,"column":36}}},"22":{"name":"(anonymous_22)","line":110,"loc":{"start":{"line":110,"column":29},"end":{"line":110,"column":44}}},"23":{"name":"(anonymous_23)","line":117,"loc":{"start":{"line":117,"column":31},"end":{"line":117,"column":45}}}},"statementMap":{"1":{"start":{"line":10,"column":0},"end":{"line":14,"column":26}},"2":{"start":{"line":17,"column":0},"end":{"line":42,"column":3}},"3":{"start":{"line":23,"column":4},"end":{"line":23,"column":51}},"4":{"start":{"line":27,"column":4},"end":{"line":28,"column":45}},"5":{"start":{"line":30,"column":4},"end":{"line":30,"column":88}},"6":{"start":{"line":31,"column":4},"end":{"line":31,"column":33}},"7":{"start":{"line":35,"column":4},"end":{"line":35,"column":63}},"8":{"start":{"line":36,"column":4},"end":{"line":36,"column":43}},"9":{"start":{"line":40,"column":4},"end":{"line":40,"column":42}},"10":{"start":{"line":45,"column":0},"end":{"line":49,"column":1}},"11":{"start":{"line":46,"column":2},"end":{"line":48,"column":5}},"12":{"start":{"line":47,"column":4},"end":{"line":47,"column":34}},"13":{"start":{"line":52,"column":0},"end":{"line":56,"column":6}},"14":{"start":{"line":59,"column":0},"end":{"line":64,"column":1}},"15":{"start":{"line":60,"column":2},"end":{"line":63,"column":5}},"16":{"start":{"line":61,"column":4},"end":{"line":61,"column":14}},"17":{"start":{"line":62,"column":4},"end":{"line":62,"column":11}},"18":{"start":{"line":66,"column":0},"end":{"line":71,"column":1}},"19":{"start":{"line":67,"column":2},"end":{"line":70,"column":5}},"20":{"start":{"line":68,"column":4},"end":{"line":68,"column":23}},"21":{"start":{"line":69,"column":4},"end":{"line":69,"column":11}},"22":{"start":{"line":73,"column":0},"end":{"line":78,"column":1}},"23":{"start":{"line":74,"column":2},"end":{"line":77,"column":5}},"24":{"start":{"line":75,"column":4},"end":{"line":75,"column":23}},"25":{"start":{"line":76,"column":4},"end":{"line":76,"column":11}},"26":{"start":{"line":80,"column":0},"end":{"line":85,"column":1}},"27":{"start":{"line":81,"column":2},"end":{"line":84,"column":5}},"28":{"start":{"line":82,"column":4},"end":{"line":82,"column":28}},"29":{"start":{"line":83,"column":4},"end":{"line":83,"column":11}},"30":{"start":{"line":87,"column":0},"end":{"line":92,"column":1}},"31":{"start":{"line":88,"column":2},"end":{"line":91,"column":5}},"32":{"start":{"line":89,"column":4},"end":{"line":89,"column":25}},"33":{"start":{"line":90,"column":4},"end":{"line":90,"column":11}},"34":{"start":{"line":95,"column":0},"end":{"line":104,"column":1}},"35":{"start":{"line":96,"column":2},"end":{"line":96,"column":21}},"36":{"start":{"line":97,"column":2},"end":{"line":97,"column":12}},"37":{"start":{"line":98,"column":2},"end":{"line":103,"column":5}},"38":{"start":{"line":99,"column":4},"end":{"line":102,"column":7}},"39":{"start":{"line":100,"column":6},"end":{"line":100,"column":28}},"40":{"start":{"line":101,"column":6},"end":{"line":101,"column":32}},"41":{"start":{"line":101,"column":25},"end":{"line":101,"column":32}},"42":{"start":{"line":106,"column":0},"end":{"line":115,"column":1}},"43":{"start":{"line":107,"column":2},"end":{"line":107,"column":21}},"44":{"start":{"line":108,"column":2},"end":{"line":108,"column":12}},"45":{"start":{"line":109,"column":2},"end":{"line":114,"column":5}},"46":{"start":{"line":110,"column":4},"end":{"line":113,"column":7}},"47":{"start":{"line":111,"column":6},"end":{"line":111,"column":28}},"48":{"start":{"line":112,"column":6},"end":{"line":112,"column":32}},"49":{"start":{"line":112,"column":25},"end":{"line":112,"column":32}},"50":{"start":{"line":117,"column":0},"end":{"line":120,"column":3}},"51":{"start":{"line":118,"column":2},"end":{"line":118,"column":31}},"52":{"start":{"line":119,"column":2},"end":{"line":119,"column":9}},"53":{"start":{"line":122,"column":0},"end":{"line":122,"column":30}},"54":{"start":{"line":123,"column":0},"end":{"line":123,"column":34}},"55":{"start":{"line":124,"column":0},"end":{"line":124,"column":34}},"56":{"start":{"line":125,"column":0},"end":{"line":125,"column":44}},"57":{"start":{"line":126,"column":0},"end":{"line":126,"column":38}},"58":{"start":{"line":127,"column":0},"end":{"line":127,"column":30}},"59":{"start":{"line":128,"column":0},"end":{"line":128,"column":38}},"60":{"start":{"line":130,"column":0},"end":{"line":130,"column":12}}},"branchMap":{"1":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":7}},{"start":{"line":31,"column":11},"end":{"line":31,"column":32}}]},"2":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":6},"end":{"line":100,"column":16}},{"start":{"line":100,"column":20},"end":{"line":100,"column":27}}]},"3":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":6},"end":{"line":101,"column":6}},{"start":{"line":101,"column":6},"end":{"line":101,"column":6}}]},"4":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":6},"end":{"line":111,"column":16}},{"start":{"line":111,"column":20},"end":{"line":111,"column":27}}]},"5":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":6},"end":{"line":112,"column":6}},{"start":{"line":112,"column":6},"end":{"line":112,"column":6}}]}},"code":["/**"," * wordpos-bench.js"," *"," * Copyright (c) 2012-2016 mooster@42at.com"," * https://github.com/moos/wordpos"," *"," * Released under MIT license"," */","","var Bench = require('mini-bench'),","  fs = require('fs'),","  _ = require('underscore')._,","  WordPOS = require('../src/wordpos'),","  wordpos = new WordPOS();","","","suite = new Bench.Suite({","  type: 'fixed',","  iterations: 1,","  async: false,\t// important!","","  start: function(tests){","    console.log('starting %d tests', tests.length);","  },","","  result: function(name, stats){","    var persec = 1000 / stats.elapsed","      , ops = .5 + stats.iterations * persec;","","    console.log('  \\033[90m%s : \\033[36m%d \\033[90mops/s\\033[0m', name, ops | 0, stats);","    pos && console.log(out(pos));","  },","","  done: function(time){","    console.log('looked up %d words, %d found', nwords, found);","    console.log('done in %d msecs', time );","  },","","  section: function(name, stats) {","    console.log('\\033[35m%s\\033[0m',name);","  }","});","","","function out(res){","  return _(res).keys().map(function(k){","    return k + ':' + res[k].length","  });","}","","","var","  text = fs.readFileSync('text-512.txt', 'utf8'),","  parsedText = wordpos.parse(text),","  nwords = parsedText.length,","  pos;","","","function getPOS(next){","  wordpos.getPOS(text, function(res){","    pos = res;","    next();","  });","}","","function getNouns(next){","  wordpos.getNouns(text, function(res){","    pos = {nouns: res};","    next();","  });","}","","function getVerbs(next){","  wordpos.getVerbs(text, function(res){","    pos = {verbs: res};","    next();","  });","}","","function getAdjectives(next){","  wordpos.getAdjectives(text, function(res){","    pos = {adjectives: res};","    next();","  });","}","","function getAdverbs(next){","  wordpos.getAdverbs(text, function(res){","    pos = {adverbs: res};","    next();","  });","}","","","function lookup(next){","  var count = nwords;","  found = 0;","  parsedText.forEach(function(word) {","    wordpos.lookup(word, function (res) {","      res.length && ++found;","      if (--count === 0) next();","    });","  });","}","","function lookupNoun(next){","  var count = nwords;","  found = 0;","  parsedText.forEach(function(word) {","    wordpos.lookupNoun(word, function (res) {","      res.length && ++found;","      if (--count === 0) next();","    });","  });","}","","suite.section('--512 words--', function(next){","  suite.options.iterations = 1;","  next();","});","","suite.bench('getPOS', getPOS);","suite.bench('getNouns', getNouns);","suite.bench('getVerbs', getVerbs);","suite.bench('getAdjectives', getAdjectives);","suite.bench('getAdverbs', getAdverbs);","suite.bench('lookup', lookup);","suite.bench('lookupNoun', lookupNoun);","","suite.run();",""],"l":{"10":2,"17":0,"23":0,"27":0,"30":0,"31":0,"35":0,"36":0,"40":0,"45":1,"46":0,"47":0,"52":0,"59":1,"60":0,"61":0,"62":0,"66":1,"67":0,"68":0,"69":0,"73":1,"74":0,"75":0,"76":0,"80":1,"81":0,"82":0,"83":0,"87":1,"88":0,"89":0,"90":0,"95":1,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"106":1,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"117":0,"118":0,"119":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"130":0}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/readTest.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/readTest.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":2,"10":0,"11":0,"12":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":14,"loc":{"start":{"line":14,"column":33},"end":{"line":14,"column":55}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":23}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":14}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"4":{"start":{"line":4,"column":0},"end":{"line":4,"column":13}},"5":{"start":{"line":5,"column":0},"end":{"line":5,"column":14}},"6":{"start":{"line":6,"column":0},"end":{"line":6,"column":7}},"7":{"start":{"line":7,"column":0},"end":{"line":7,"column":68}},"8":{"start":{"line":9,"column":0},"end":{"line":9,"column":13}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":32}},"10":{"start":{"line":14,"column":0},"end":{"line":19,"column":3}},"11":{"start":{"line":15,"column":2},"end":{"line":15,"column":35}},"12":{"start":{"line":17,"column":2},"end":{"line":17,"column":35}}},"branchMap":{},"code":["var fs = require('fs');","var len = 512;","var buffer = new Buffer(len);","var k = 1000;","var M = k * k;","var fd;","var filePath = '/dev/wordpos/node_modules/wordnet-db/dict/data.adj';","","pos = 11 * M;","","fd = fs.openSync(filePath, 'r');","","","fs.read(fd, buffer, 0, len, pos, function (err, count) {","  var str = buffer.toString('hex');","","  console.log(err, pos, count, str)","  // if (str === '' && !err) err = new Error('no data at offset ' + pos);","});",""],"l":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"9":2,"11":2,"14":0,"15":0,"17":0}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/src/rand.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/src/rand.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1,"67":0,"68":0,"69":0,"70":1,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":1,"78":0,"79":0,"80":0,"81":0,"82":1,"83":0,"84":0,"85":0,"86":1,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0,0],"24":[0,0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"makeRandX","line":25,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":23}}},"2":{"name":"(anonymous_2)","line":26,"loc":{"start":{"line":26,"column":9},"end":{"line":26,"column":46}}},"3":{"name":"(anonymous_3)","line":39,"loc":{"start":{"line":39,"column":41},"end":{"line":39,"column":59}}},"4":{"name":"rand","line":55,"loc":{"start":{"line":55,"column":0},"end":{"line":55,"column":40}}},"5":{"name":"(anonymous_5)","line":61,"loc":{"start":{"line":61,"column":21},"end":{"line":61,"column":47}}},"6":{"name":"(anonymous_6)","line":105,"loc":{"start":{"line":105,"column":21},"end":{"line":105,"column":43}}},"7":{"name":"(anonymous_7)","line":106,"loc":{"start":{"line":106,"column":35},"end":{"line":106,"column":53}}},"8":{"name":"collector","line":127,"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":79}}},"9":{"name":"(anonymous_9)","line":129,"loc":{"start":{"line":129,"column":28},"end":{"line":129,"column":44}}},"10":{"name":"randAll","line":171,"loc":{"start":{"line":171,"column":0},"end":{"line":171,"column":33}}},"11":{"name":"(anonymous_11)","line":189,"loc":{"start":{"line":189,"column":21},"end":{"line":189,"column":47}}},"12":{"name":"tryPart","line":194,"loc":{"start":{"line":194,"column":4},"end":{"line":194,"column":23}}},"13":{"name":"partCallback","line":205,"loc":{"start":{"line":205,"column":4},"end":{"line":205,"column":34}}},"14":{"name":"done","line":219,"loc":{"start":{"line":219,"column":4},"end":{"line":219,"column":20}}},"15":{"name":"randomify","line":235,"loc":{"start":{"line":235,"column":0},"end":{"line":235,"column":25}}},"16":{"name":"(anonymous_16)","line":244,"loc":{"start":{"line":244,"column":8},"end":{"line":244,"column":31}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":16,"column":17}},"2":{"start":{"line":25,"column":0},"end":{"line":45,"column":1}},"3":{"start":{"line":26,"column":2},"end":{"line":44,"column":4}},"4":{"start":{"line":28,"column":4},"end":{"line":33,"column":38}},"5":{"start":{"line":35,"column":4},"end":{"line":37,"column":5}},"6":{"start":{"line":36,"column":6},"end":{"line":36,"column":22}},"7":{"start":{"line":39,"column":4},"end":{"line":43,"column":7}},"8":{"start":{"line":40,"column":6},"end":{"line":40,"column":36}},"9":{"start":{"line":41,"column":6},"end":{"line":41,"column":47}},"10":{"start":{"line":42,"column":6},"end":{"line":42,"column":45}},"11":{"start":{"line":55,"column":0},"end":{"line":156,"column":1}},"12":{"start":{"line":56,"column":2},"end":{"line":59,"column":14}},"13":{"start":{"line":61,"column":2},"end":{"line":155,"column":5}},"14":{"start":{"line":64,"column":4},"end":{"line":117,"column":5}},"15":{"start":{"line":65,"column":6},"end":{"line":65,"column":44}},"16":{"start":{"line":70,"column":6},"end":{"line":91,"column":7}},"17":{"start":{"line":73,"column":8},"end":{"line":78,"column":9}},"18":{"start":{"line":74,"column":10},"end":{"line":74,"column":28}},"19":{"start":{"line":75,"column":10},"end":{"line":75,"column":52}},"20":{"start":{"line":76,"column":10},"end":{"line":76,"column":37}},"21":{"start":{"line":80,"column":8},"end":{"line":85,"column":9}},"22":{"start":{"line":82,"column":10},"end":{"line":82,"column":49}},"23":{"start":{"line":84,"column":10},"end":{"line":84,"column":20}},"24":{"start":{"line":89,"column":8},"end":{"line":89,"column":22}},"25":{"start":{"line":90,"column":8},"end":{"line":90,"column":31}},"26":{"start":{"line":93,"column":6},"end":{"line":96,"column":7}},"27":{"start":{"line":94,"column":8},"end":{"line":94,"column":45}},"28":{"start":{"line":95,"column":8},"end":{"line":95,"column":20}},"29":{"start":{"line":100,"column":6},"end":{"line":100,"column":53}},"30":{"start":{"line":103,"column":6},"end":{"line":115,"column":7}},"31":{"start":{"line":104,"column":8},"end":{"line":104,"column":33}},"32":{"start":{"line":105,"column":8},"end":{"line":113,"column":11}},"33":{"start":{"line":106,"column":10},"end":{"line":112,"column":13}},"34":{"start":{"line":107,"column":12},"end":{"line":107,"column":36}},"35":{"start":{"line":108,"column":12},"end":{"line":111,"column":13}},"36":{"start":{"line":109,"column":14},"end":{"line":109,"column":48}},"37":{"start":{"line":110,"column":14},"end":{"line":110,"column":31}},"38":{"start":{"line":114,"column":8},"end":{"line":114,"column":15}},"39":{"start":{"line":116,"column":6},"end":{"line":116,"column":17}},"40":{"start":{"line":120,"column":4},"end":{"line":122,"column":44}},"41":{"start":{"line":125,"column":4},"end":{"line":125,"column":79}},"42":{"start":{"line":127,"column":4},"end":{"line":153,"column":5}},"43":{"start":{"line":128,"column":6},"end":{"line":131,"column":11}},"44":{"start":{"line":130,"column":10},"end":{"line":130,"column":54}},"45":{"start":{"line":135,"column":6},"end":{"line":148,"column":7}},"46":{"start":{"line":137,"column":8},"end":{"line":137,"column":53}},"47":{"start":{"line":138,"column":8},"end":{"line":142,"column":9}},"48":{"start":{"line":139,"column":10},"end":{"line":139,"column":47}},"49":{"start":{"line":140,"column":10},"end":{"line":140,"column":22}},"50":{"start":{"line":141,"column":10},"end":{"line":141,"column":17}},"51":{"start":{"line":144,"column":8},"end":{"line":144,"column":30}},"52":{"start":{"line":145,"column":8},"end":{"line":145,"column":33}},"53":{"start":{"line":147,"column":8},"end":{"line":147,"column":50}},"54":{"start":{"line":150,"column":6},"end":{"line":150,"column":41}},"55":{"start":{"line":151,"column":6},"end":{"line":151,"column":46}},"56":{"start":{"line":152,"column":6},"end":{"line":152,"column":21}},"57":{"start":{"line":159,"column":0},"end":{"line":165,"column":2}},"58":{"start":{"line":171,"column":0},"end":{"line":227,"column":1}},"59":{"start":{"line":172,"column":2},"end":{"line":180,"column":16}},"60":{"start":{"line":182,"column":2},"end":{"line":186,"column":3}},"61":{"start":{"line":183,"column":4},"end":{"line":183,"column":20}},"62":{"start":{"line":185,"column":4},"end":{"line":185,"column":25}},"63":{"start":{"line":189,"column":2},"end":{"line":226,"column":5}},"64":{"start":{"line":191,"column":4},"end":{"line":191,"column":48}},"65":{"start":{"line":192,"column":4},"end":{"line":192,"column":14}},"66":{"start":{"line":194,"column":4},"end":{"line":203,"column":5}},"67":{"start":{"line":195,"column":6},"end":{"line":198,"column":43}},"68":{"start":{"line":201,"column":6},"end":{"line":201,"column":51}},"69":{"start":{"line":202,"column":6},"end":{"line":202,"column":37}},"70":{"start":{"line":205,"column":4},"end":{"line":217,"column":5}},"71":{"start":{"line":206,"column":6},"end":{"line":208,"column":7}},"72":{"start":{"line":207,"column":8},"end":{"line":207,"column":49}},"73":{"start":{"line":210,"column":6},"end":{"line":212,"column":7}},"74":{"start":{"line":211,"column":8},"end":{"line":211,"column":25}},"75":{"start":{"line":215,"column":6},"end":{"line":215,"column":41}},"76":{"start":{"line":216,"column":6},"end":{"line":216,"column":13}},"77":{"start":{"line":219,"column":4},"end":{"line":224,"column":5}},"78":{"start":{"line":220,"column":6},"end":{"line":220,"column":49}},"79":{"start":{"line":221,"column":6},"end":{"line":221,"column":24}},"80":{"start":{"line":222,"column":6},"end":{"line":222,"column":45}},"81":{"start":{"line":223,"column":6},"end":{"line":223,"column":23}},"82":{"start":{"line":235,"column":0},"end":{"line":238,"column":1}},"83":{"start":{"line":236,"column":2},"end":{"line":236,"column":56}},"84":{"start":{"line":236,"column":24},"end":{"line":236,"column":56}},"85":{"start":{"line":237,"column":2},"end":{"line":237,"column":29}},"86":{"start":{"line":242,"column":0},"end":{"line":263,"column":2}},"87":{"start":{"line":245,"column":4},"end":{"line":245,"column":68}},"88":{"start":{"line":246,"column":4},"end":{"line":246,"column":68}},"89":{"start":{"line":247,"column":4},"end":{"line":247,"column":66}},"90":{"start":{"line":248,"column":4},"end":{"line":248,"column":66}},"91":{"start":{"line":253,"column":4},"end":{"line":253,"column":32}},"92":{"start":{"line":258,"column":4},"end":{"line":258,"column":48}},"93":{"start":{"line":259,"column":4},"end":{"line":259,"column":45}},"94":{"start":{"line":260,"column":4},"end":{"line":260,"column":43}},"95":{"start":{"line":261,"column":4},"end":{"line":261,"column":43}}},"branchMap":{"1":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":18},"end":{"line":28,"column":38}},{"start":{"line":28,"column":42},"end":{"line":28,"column":53}}]},"2":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":14},"end":{"line":29,"column":21}},{"start":{"line":29,"column":25},"end":{"line":29,"column":35}}]},"3":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":19},"end":{"line":32,"column":23}},{"start":{"line":32,"column":27},"end":{"line":32,"column":42}},{"start":{"line":32,"column":46},"end":{"line":32,"column":48}}]},"4":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":14},"end":{"line":33,"column":18}},{"start":{"line":33,"column":22},"end":{"line":33,"column":32}},{"start":{"line":33,"column":36},"end":{"line":33,"column":37}}]},"5":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":35,"column":4}},{"start":{"line":35,"column":4},"end":{"line":35,"column":4}}]},"6":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":6},"end":{"line":41,"column":13}},{"start":{"line":41,"column":17},"end":{"line":41,"column":46}}]},"7":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":6},"end":{"line":42,"column":14}},{"start":{"line":42,"column":18},"end":{"line":42,"column":44}}]},"8":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":4},"end":{"line":64,"column":4}},{"start":{"line":64,"column":4},"end":{"line":64,"column":4}}]},"9":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":6},"end":{"line":70,"column":6}},{"start":{"line":70,"column":6},"end":{"line":70,"column":6}}]},"10":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":8}},{"start":{"line":73,"column":8},"end":{"line":73,"column":8}}]},"11":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":6},"end":{"line":93,"column":6}},{"start":{"line":93,"column":6},"end":{"line":93,"column":6}}]},"12":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":10},"end":{"line":93,"column":14}},{"start":{"line":93,"column":18},"end":{"line":93,"column":50}}]},"13":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":8},"end":{"line":94,"column":16}},{"start":{"line":94,"column":20},"end":{"line":94,"column":44}}]},"14":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":6},"end":{"line":103,"column":6}},{"start":{"line":103,"column":6},"end":{"line":103,"column":6}}]},"15":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12}},{"start":{"line":108,"column":12},"end":{"line":108,"column":12}}]},"16":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":14},"end":{"line":109,"column":22}},{"start":{"line":109,"column":26},"end":{"line":109,"column":47}}]},"17":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":6},"end":{"line":135,"column":6}},{"start":{"line":135,"column":6},"end":{"line":135,"column":6}}]},"18":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":8},"end":{"line":138,"column":8}},{"start":{"line":138,"column":8},"end":{"line":138,"column":8}}]},"19":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":12},"end":{"line":138,"column":31}},{"start":{"line":138,"column":35},"end":{"line":138,"column":74}}]},"20":{"line":139,"type":"binary-expr","locations":[{"start":{"line":139,"column":10},"end":{"line":139,"column":18}},{"start":{"line":139,"column":22},"end":{"line":139,"column":46}}]},"21":{"line":151,"type":"binary-expr","locations":[{"start":{"line":151,"column":6},"end":{"line":151,"column":14}},{"start":{"line":151,"column":18},"end":{"line":151,"column":45}}]},"22":{"line":174,"type":"binary-expr","locations":[{"start":{"line":174,"column":12},"end":{"line":174,"column":19}},{"start":{"line":174,"column":23},"end":{"line":174,"column":33}}]},"23":{"line":176,"type":"binary-expr","locations":[{"start":{"line":176,"column":17},"end":{"line":176,"column":21}},{"start":{"line":176,"column":25},"end":{"line":176,"column":40}},{"start":{"line":176,"column":44},"end":{"line":176,"column":46}}]},"24":{"line":177,"type":"binary-expr","locations":[{"start":{"line":177,"column":12},"end":{"line":177,"column":16}},{"start":{"line":177,"column":20},"end":{"line":177,"column":30}},{"start":{"line":177,"column":34},"end":{"line":177,"column":35}}]},"25":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":2},"end":{"line":182,"column":2}},{"start":{"line":182,"column":2},"end":{"line":182,"column":2}}]},"26":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":6},"end":{"line":206,"column":6}},{"start":{"line":206,"column":6},"end":{"line":206,"column":6}}]},"27":{"line":210,"type":"if","locations":[{"start":{"line":210,"column":6},"end":{"line":210,"column":6}},{"start":{"line":210,"column":6},"end":{"line":210,"column":6}}]},"28":{"line":210,"type":"binary-expr","locations":[{"start":{"line":210,"column":10},"end":{"line":210,"column":32}},{"start":{"line":210,"column":36},"end":{"line":210,"column":50}}]},"29":{"line":220,"type":"binary-expr","locations":[{"start":{"line":220,"column":6},"end":{"line":220,"column":13}},{"start":{"line":220,"column":18},"end":{"line":220,"column":47}}]},"30":{"line":222,"type":"binary-expr","locations":[{"start":{"line":222,"column":6},"end":{"line":222,"column":14}},{"start":{"line":222,"column":18},"end":{"line":222,"column":44}}]},"31":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":2},"end":{"line":236,"column":2}},{"start":{"line":236,"column":2},"end":{"line":236,"column":2}}]}},"code":["/*!"," * rand.js"," *"," * \t\tdefine rand() and randX() functions on wordpos"," *"," * Copyright (c) 2012-2016 mooster@42at.com"," * https://github.com/moos/wordpos"," *"," * Released under MIT license"," */","","var _ = require('underscore')._,","  util = require('util'),","  Trie = require('../lib/natural/trie/trie'),","  IndexFile = require('./indexFile'),","  KEY_LENGTH = 3;","","","/**"," * factory function for randX()"," *"," * @param pos {string} - a,r,n,v"," * @returns {Function} - rand function bound to an index file"," */","function makeRandX(pos){","  return function(opts, callback, _noprofile) {","    // disable profiling when isX() used internally","    var profile = this.options.profile && !_noprofile,","      start = profile && new Date(),","      args = [],","      index = this.getFilesFor(pos).index,","      startsWith = opts && opts.startsWith || '',","      count = opts && opts.count || 1;","","    if (typeof opts === 'function') {","      callback = opts;","    }","","    return index.rand(startsWith, count, function (record) {","      args.push(record, startsWith);","      profile && args.push(new Date() - start);","      callback && callback.apply(null, args);","    });","  };","}","","/**"," * rand function (bound to index)"," *"," * @param startsWith {string} - get random word(s) that start with this, or ''"," * @param num {number} - number of words to return"," * @param callback {function} - callback function, receives words array and startsWith"," * @returns Promise"," */","function rand(startsWith, num, callback){","  var self = this,","    nextKey = null,","    trie = this.fastIndex.trie,","    key, keys;","","  return new Promise(function(resolve, reject) {","","    //console.log('-- ', startsWith, num, self.fastIndex.indexKeys.length);","    if (startsWith) {","      key = startsWith.slice(0, KEY_LENGTH);","","      /**","       * if key is 'a' or 'ab' (<3 chars), search for ALL keys starting with that.","       */","      if (key.length < KEY_LENGTH) {","","        // calc trie if haven't done so yet","        if (!trie) {","          trie = new Trie();","          trie.addStrings(self.fastIndex.indexKeys);","          self.fastIndex.trie = trie;","          //console.log(' +++ Trie calc ');","        }","","        try {","          // trie throws if not found!!!!!","          keys = trie.keysWithPrefix(startsWith);","        } catch (e) {","          keys = [];","        }","","        // read all keys then select random word.","        // May be large disk read!","        key = keys[0];","        nextKey = _.last(keys);","      }","","      if (!key || !(key in self.fastIndex.offsets))  {","        callback && callback([], startsWith);","        resolve([]);","      }","","    } else {","      // no startWith given - random select among keys","      keys = _.sample(self.fastIndex.indexKeys, num);","","      // if num > 1, run each key independently and collect results","      if (num > 1) {","        var results = [], ii = 0;","        _(keys).each(function (startsWith) {","          self.rand(startsWith, 1, function (result) {","            results.push(result[0]);","            if (++ii == num) {","              callback && callback(results, '');","              resolve(results);","            }","          });","        });","        return;","      }","      key = keys;","    }","","    // prepare the piper","    var args = [key, nextKey, self],","      task = 'rand:' + key + nextKey,","      context = [startsWith, num, callback]; // last arg MUST be callback","","    // pay the piper","    self.piper(task, IndexFile.readIndexBetweenKeys, args, context, collector);","","    function collector(key, nextKey, index, startsWith, num, callback, buffer) {","      var lines = buffer.toString().split('\\n'),","        matches = lines.map(function (line) {","          return line.substring(0, line.indexOf(' '));","        });","      //console.log(' got lines for key ', key, lines.length);","","      // we got bunch of matches for key - now search within for startsWith","      if (startsWith !== key) {","        // binary search for startsWith within set of matches","        var ind = _.sortedIndex(matches, startsWith);","        if (ind >= lines.length || matches[ind].indexOf(startsWith) === -1) {","          callback && callback([], startsWith);","          resolve([]);","          return;","        }","","        var trie = new Trie();","        trie.addStrings(matches);","        //console.log('Trie > ', trie.matchesWithPrefix( startsWith ));","        matches = trie.keysWithPrefix(startsWith);","      }","","      var words = _.sample(matches, num);","      callback && callback(words, startsWith);","      resolve(words);","    }","","  }); // Promise","}","","// relative weight of each POS word count (DB 3.1 numbers)","var POS_factor = {","  Noun: 26,","  Verb: 3,","  Adjective: 5,","  Adverb: 1,","  Total: 37","};","","/**"," * rand() - for all Index files"," * @returns Promise"," */","function randAll(opts, callback) {","  var","    profile = this.options.profile,","    start = profile && new Date(),","    results = [],","    startsWith = opts && opts.startsWith || '',","    count = opts && opts.count || 1,","    args = [null, startsWith],","    parts = 'Noun Verb Adjective Adverb'.split(' '),","    self = this;","","  if (typeof opts === 'function') {","    callback = opts;","  } else {","    opts = _.clone(opts);","  }","","","  return new Promise(function(resolve, reject) {","    // select at random a POS to look at","    var doParts = _.sample(parts, parts.length);","    tryPart();","","    function tryPart() {","      var part = doParts.pop(),","        rand = 'rand' + part,","        factor = POS_factor[part],","        weight = factor / POS_factor.Total;","","      // pick count according to relative weight","      opts.count = Math.ceil(count * weight * 1.1); // guard against dupes","      self[rand](opts, partCallback);","    }","","    function partCallback(result) {","      if (result) {","        results = _.uniq(results.concat(result));  // make sure it's unique!","      }","","      if (results.length < count && doParts.length) {","        return tryPart();","      }","","      // final random and trim excess","      results = _.sample(results, count);","      done();","    }","","    function done() {","      profile && (args.push(new Date() - start));","      args[0] = results;","      callback && callback.apply(null, args);","      resolve(results);","    }","","  }); // Promise","}","","/**"," * bind rand() to index"," *"," * @param index {object} - the IndexFile instance"," * @returns {function} - bound rand function for index"," */","function randomify(index){","  if (!index.fastIndex) throw 'rand requires fastIndex';","  return _.bind(rand, index);","}","","","","module.exports = {","","  init: function(wordposProto) {","    wordposProto.nounIndex.rand = randomify(wordposProto.nounIndex);","    wordposProto.verbIndex.rand = randomify(wordposProto.verbIndex);","    wordposProto.adjIndex.rand = randomify(wordposProto.adjIndex);","    wordposProto.advIndex.rand = randomify(wordposProto.advIndex);","","    /**","     * define rand()","     */","    wordposProto.rand = randAll;","","    /**","     * define randX()","     */","    wordposProto.randAdjective = makeRandX('a');","    wordposProto.randAdverb = makeRandX('r');","    wordposProto.randNoun = makeRandX('n');","    wordposProto.randVerb = makeRandX('v');","  }","};","",""],"l":{"12":1,"25":1,"26":0,"28":0,"35":0,"36":0,"39":0,"40":0,"41":0,"42":0,"55":1,"56":0,"61":0,"64":0,"65":0,"70":0,"73":0,"74":0,"75":0,"76":0,"80":0,"82":0,"84":0,"89":0,"90":0,"93":0,"94":0,"95":0,"100":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"114":0,"116":0,"120":0,"125":0,"127":1,"128":0,"130":0,"135":0,"137":0,"138":0,"139":0,"140":0,"141":0,"144":0,"145":0,"147":0,"150":0,"151":0,"152":0,"159":1,"171":1,"172":0,"182":0,"183":0,"185":0,"189":0,"191":0,"192":0,"194":1,"195":0,"201":0,"202":0,"205":1,"206":0,"207":0,"210":0,"211":0,"215":0,"216":0,"219":1,"220":0,"221":0,"222":0,"223":0,"235":1,"236":0,"237":0,"242":1,"245":0,"246":0,"247":0,"248":0,"253":0,"258":0,"259":0,"260":0,"261":0}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/lib/natural/trie/trie.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/lib/natural/trie/trie.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":1,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":1,"72":0,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":1,"85":0,"86":0,"87":0,"88":0,"89":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"Trie","line":26,"loc":{"start":{"line":26,"column":0},"end":{"line":26,"column":29}}},"2":{"name":"(anonymous_2)","line":41,"loc":{"start":{"line":41,"column":27},"end":{"line":41,"column":44}}},"3":{"name":"(anonymous_3)","line":68,"loc":{"start":{"line":68,"column":28},"end":{"line":68,"column":43}}},"4":{"name":"(anonymous_4)","line":83,"loc":{"start":{"line":83,"column":32},"end":{"line":83,"column":49}}},"5":{"name":"isEmpty","line":88,"loc":{"start":{"line":88,"column":4},"end":{"line":88,"column":30}}},"6":{"name":"get","line":93,"loc":{"start":{"line":93,"column":4},"end":{"line":93,"column":30}}},"7":{"name":"recurse","line":99,"loc":{"start":{"line":99,"column":4},"end":{"line":99,"column":52}}},"8":{"name":"(anonymous_8)","line":125,"loc":{"start":{"line":125,"column":26},"end":{"line":125,"column":43}}},"9":{"name":"(anonymous_9)","line":156,"loc":{"start":{"line":156,"column":35},"end":{"line":156,"column":52}}},"10":{"name":"recurse","line":161,"loc":{"start":{"line":161,"column":1},"end":{"line":161,"column":55}}},"11":{"name":"(anonymous_11)","line":187,"loc":{"start":{"line":187,"column":28},"end":{"line":187,"column":45}}},"12":{"name":"recurse","line":192,"loc":{"start":{"line":192,"column":1},"end":{"line":192,"column":53}}},"13":{"name":"(anonymous_13)","line":219,"loc":{"start":{"line":219,"column":25},"end":{"line":219,"column":36}}}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":35,"column":1}},"2":{"start":{"line":27,"column":1},"end":{"line":27,"column":22}},"3":{"start":{"line":28,"column":1},"end":{"line":28,"column":16}},"4":{"start":{"line":30,"column":1},"end":{"line":32,"column":2}},"5":{"start":{"line":31,"column":2},"end":{"line":31,"column":23}},"6":{"start":{"line":34,"column":1},"end":{"line":34,"column":25}},"7":{"start":{"line":41,"column":0},"end":{"line":63,"column":2}},"8":{"start":{"line":42,"column":1},"end":{"line":44,"column":2}},"9":{"start":{"line":43,"column":2},"end":{"line":43,"column":32}},"10":{"start":{"line":47,"column":1},"end":{"line":51,"column":2}},"11":{"start":{"line":48,"column":2},"end":{"line":48,"column":23}},"12":{"start":{"line":49,"column":2},"end":{"line":49,"column":16}},"13":{"start":{"line":50,"column":2},"end":{"line":50,"column":17}},"14":{"start":{"line":54,"column":1},"end":{"line":54,"column":39}},"15":{"start":{"line":56,"column":1},"end":{"line":59,"column":2}},"16":{"start":{"line":57,"column":2},"end":{"line":57,"column":49}},"17":{"start":{"line":58,"column":2},"end":{"line":58,"column":36}},"18":{"start":{"line":62,"column":1},"end":{"line":62,"column":44}},"19":{"start":{"line":68,"column":0},"end":{"line":72,"column":2}},"20":{"start":{"line":69,"column":1},"end":{"line":71,"column":2}},"21":{"start":{"line":70,"column":2},"end":{"line":70,"column":26}},"22":{"start":{"line":83,"column":0},"end":{"line":119,"column":2}},"23":{"start":{"line":84,"column":4},"end":{"line":86,"column":5}},"24":{"start":{"line":85,"column":8},"end":{"line":85,"column":38}},"25":{"start":{"line":88,"column":4},"end":{"line":91,"column":5}},"26":{"start":{"line":89,"column":8},"end":{"line":89,"column":77}},"27":{"start":{"line":89,"column":32},"end":{"line":89,"column":77}},"28":{"start":{"line":89,"column":64},"end":{"line":89,"column":77}},"29":{"start":{"line":90,"column":8},"end":{"line":90,"column":20}},"30":{"start":{"line":93,"column":4},"end":{"line":97,"column":5}},"31":{"start":{"line":94,"column":8},"end":{"line":94,"column":30}},"32":{"start":{"line":94,"column":18},"end":{"line":94,"column":30}},"33":{"start":{"line":95,"column":8},"end":{"line":95,"column":41}},"34":{"start":{"line":95,"column":29},"end":{"line":95,"column":41}},"35":{"start":{"line":96,"column":8},"end":{"line":96,"column":64}},"36":{"start":{"line":99,"column":4},"end":{"line":114,"column":5}},"37":{"start":{"line":100,"column":8},"end":{"line":100,"column":26}},"38":{"start":{"line":100,"column":19},"end":{"line":100,"column":26}},"39":{"start":{"line":103,"column":8},"end":{"line":105,"column":9}},"40":{"start":{"line":104,"column":12},"end":{"line":104,"column":39}},"41":{"start":{"line":107,"column":8},"end":{"line":109,"column":9}},"42":{"start":{"line":108,"column":12},"end":{"line":108,"column":20}},"43":{"start":{"line":111,"column":8},"end":{"line":113,"column":9}},"44":{"start":{"line":112,"column":12},"end":{"line":112,"column":67}},"45":{"start":{"line":116,"column":4},"end":{"line":116,"column":21}},"46":{"start":{"line":117,"column":4},"end":{"line":117,"column":49}},"47":{"start":{"line":118,"column":4},"end":{"line":118,"column":19}},"48":{"start":{"line":125,"column":0},"end":{"line":145,"column":1}},"49":{"start":{"line":126,"column":1},"end":{"line":128,"column":2}},"50":{"start":{"line":127,"column":2},"end":{"line":127,"column":32}},"51":{"start":{"line":130,"column":1},"end":{"line":132,"column":2}},"52":{"start":{"line":131,"column":2},"end":{"line":131,"column":16}},"53":{"start":{"line":135,"column":1},"end":{"line":135,"column":29}},"54":{"start":{"line":136,"column":1},"end":{"line":136,"column":41}},"55":{"start":{"line":139,"column":1},"end":{"line":141,"column":2}},"56":{"start":{"line":140,"column":2},"end":{"line":140,"column":15}},"57":{"start":{"line":144,"column":1},"end":{"line":144,"column":43}},"58":{"start":{"line":156,"column":0},"end":{"line":181,"column":2}},"59":{"start":{"line":157,"column":1},"end":{"line":159,"column":2}},"60":{"start":{"line":158,"column":2},"end":{"line":158,"column":32}},"61":{"start":{"line":161,"column":1},"end":{"line":178,"column":2}},"62":{"start":{"line":163,"column":2},"end":{"line":165,"column":3}},"63":{"start":{"line":164,"column":3},"end":{"line":164,"column":30}},"64":{"start":{"line":168,"column":2},"end":{"line":170,"column":3}},"65":{"start":{"line":169,"column":3},"end":{"line":169,"column":21}},"66":{"start":{"line":173,"column":2},"end":{"line":173,"column":40}},"67":{"start":{"line":174,"column":2},"end":{"line":176,"column":3}},"68":{"start":{"line":175,"column":3},"end":{"line":175,"column":21}},"69":{"start":{"line":177,"column":2},"end":{"line":177,"column":79}},"70":{"start":{"line":180,"column":1},"end":{"line":180,"column":38}},"71":{"start":{"line":187,"column":0},"end":{"line":212,"column":2}},"72":{"start":{"line":188,"column":1},"end":{"line":190,"column":2}},"73":{"start":{"line":189,"column":2},"end":{"line":189,"column":32}},"74":{"start":{"line":192,"column":1},"end":{"line":209,"column":2}},"75":{"start":{"line":194,"column":2},"end":{"line":196,"column":3}},"76":{"start":{"line":195,"column":3},"end":{"line":195,"column":24}},"77":{"start":{"line":199,"column":2},"end":{"line":201,"column":3}},"78":{"start":{"line":200,"column":3},"end":{"line":200,"column":29}},"79":{"start":{"line":204,"column":2},"end":{"line":204,"column":40}},"80":{"start":{"line":205,"column":2},"end":{"line":207,"column":3}},"81":{"start":{"line":206,"column":3},"end":{"line":206,"column":29}},"82":{"start":{"line":208,"column":2},"end":{"line":208,"column":77}},"83":{"start":{"line":211,"column":1},"end":{"line":211,"column":40}},"84":{"start":{"line":219,"column":0},"end":{"line":225,"column":2}},"85":{"start":{"line":220,"column":1},"end":{"line":220,"column":15}},"86":{"start":{"line":221,"column":1},"end":{"line":223,"column":2}},"87":{"start":{"line":222,"column":2},"end":{"line":222,"column":40}},"88":{"start":{"line":224,"column":1},"end":{"line":224,"column":14}},"89":{"start":{"line":230,"column":0},"end":{"line":230,"column":22}}},"branchMap":{"1":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},{"start":{"line":30,"column":1},"end":{"line":30,"column":1}}]},"2":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},{"start":{"line":42,"column":1},"end":{"line":42,"column":1}}]},"3":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},{"start":{"line":47,"column":1},"end":{"line":47,"column":1}}]},"4":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},{"start":{"line":56,"column":1},"end":{"line":56,"column":1}}]},"5":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"6":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":32},"end":{"line":89,"column":32}},{"start":{"line":89,"column":32},"end":{"line":89,"column":32}}]},"7":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":8},"end":{"line":94,"column":8}},{"start":{"line":94,"column":8},"end":{"line":94,"column":8}}]},"8":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":8}},{"start":{"line":95,"column":8},"end":{"line":95,"column":8}}]},"9":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":8},"end":{"line":100,"column":8}},{"start":{"line":100,"column":8},"end":{"line":100,"column":8}}]},"10":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":8},"end":{"line":103,"column":8}},{"start":{"line":103,"column":8},"end":{"line":103,"column":8}}]},"11":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":107,"column":8}},{"start":{"line":107,"column":8},"end":{"line":107,"column":8}}]},"12":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},{"start":{"line":126,"column":1},"end":{"line":126,"column":1}}]},"13":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},{"start":{"line":130,"column":1},"end":{"line":130,"column":1}}]},"14":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},{"start":{"line":139,"column":1},"end":{"line":139,"column":1}}]},"15":{"line":157,"type":"if","locations":[{"start":{"line":157,"column":1},"end":{"line":157,"column":1}},{"start":{"line":157,"column":1},"end":{"line":157,"column":1}}]},"16":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":2},"end":{"line":163,"column":2}},{"start":{"line":163,"column":2},"end":{"line":163,"column":2}}]},"17":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":2},"end":{"line":168,"column":2}},{"start":{"line":168,"column":2},"end":{"line":168,"column":2}}]},"18":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":2},"end":{"line":174,"column":2}},{"start":{"line":174,"column":2},"end":{"line":174,"column":2}}]},"19":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":1},"end":{"line":188,"column":1}},{"start":{"line":188,"column":1},"end":{"line":188,"column":1}}]},"20":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":2},"end":{"line":194,"column":2}},{"start":{"line":194,"column":2},"end":{"line":194,"column":2}}]},"21":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":2},"end":{"line":199,"column":2}},{"start":{"line":199,"column":2},"end":{"line":199,"column":2}}]},"22":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":2},"end":{"line":205,"column":2}},{"start":{"line":205,"column":2},"end":{"line":205,"column":2}}]}},"code":["/*","Copyright (c) 2014 Ken Koch","","Permission is hereby granted, free of charge, to any person obtaining a copy","of this software and associated documentation files (the \"Software\"), to deal","in the Software without restriction, including without limitation the rights","to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","copies of the Software, and to permit persons to whom the Software is","furnished to do so, subject to the following conditions:","","The above copyright notice and this permission notice shall be included in","all copies or substantial portions of the Software.","","THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","THE SOFTWARE.","*/","","/** "," * The basis of the TRIE structure."," **/","function Trie(caseSensitive) {","\tthis.dictionary = {};","\tthis.$ = false;","","\tif(typeof caseSensitive === \"undefined\") {","\t\tcaseSensitive = true;","\t}","","\tthis.cs = caseSensitive;","}","","/**"," * Add a single string to the TRIE, returns true if the word was already in the "," * trie."," **/","Trie.prototype.addString = function(string) {","\tif(this.cs === false) {","\t\tstring = string.toLowerCase();","\t}","","\t// If the string has only one letter, mark this as a word.","\tif(string.length === 0) {","\t\tvar wasWord = this.$;","\t\tthis.$ = true;","\t\treturn wasWord;","\t}","","\t// Make sure theres a Trie node in our dictionary","\tvar next = this.dictionary[string[0]];","","\tif(!next) {","\t\tthis.dictionary[string[0]] = new Trie(this.cs);","\t\tnext = this.dictionary[string[0]];","\t}","","\t// Continue adding the string","\treturn next.addString(string.substring(1));","};","","/**"," * Add multiple strings to the TRIE"," **/","Trie.prototype.addStrings = function(list) {","\tfor(var i in list) {","\t\tthis.addString(list[i]);","\t}","};","","/**"," * A function to search the TRIE and return an array of"," * words which have same prefix <prefix>"," * for example if we had the following words in our database:"," * a, ab, bc, cd, abc, abd"," * and we search the string: a"," * we will get :"," * [a, ab, abc, abd]"," **/","Trie.prototype.keysWithPrefix = function(prefix) {","    if(this.caseSensitive === false) {","        prefix = prefix.toLowerCase();","    }","","    function isEmpty (object) {","        for (var key in object) if (object.hasOwnProperty(key)) return false;","        return true;","    }","","    function get (node, word) {","        if(!node) return null;","        if(word.length == 0) return node;","        return get(node.dictionary[word[0]], word.substring(1));","    }","","    function recurse ( node, stringAgg, resultsAgg) {","        if (!node) return;","","        // Check if this is a word","        if (node.$) {","            resultsAgg.push(stringAgg);","        }","","        if (isEmpty(node.dictionary)) {","            return ;","        }","","        for (var c in node.dictionary) {","            recurse (node.dictionary[c],stringAgg + c, resultsAgg);","        }","    }","","    var results = [];","    recurse (get(this, prefix), prefix, results);","    return results;","};","","/** "," * A function to search the given string and return true if it lands"," * on on a word. Essentially testing if the word exists in the database."," **/","Trie.prototype.contains = function(string) {","\tif(this.cs === false) {","\t\tstring = string.toLowerCase();","\t}","","\tif(string.length === 0) {","\t\treturn this.$;","\t}","","\t// Otherwise, we need to continue searching","\tvar firstLetter = string[0];","\tvar next = this.dictionary[firstLetter];\t\t","","\t// If we don't have a node, this isn't a word","\tif(!next) {","\t\treturn false;","\t}","","\t// Otherwise continue the search at the next node","\treturn next.contains(string.substring(1));","}","","/**"," * A function to search the TRIE and return an array of words which were encountered along the way."," * This will only return words with full prefix matches."," * for example if we had the following words in our database:"," * a, ab, bc, cd, abc"," * and we searched the string: abcd"," * we would get only:"," * [a, ab, abc]"," **/","Trie.prototype.findMatchesOnPath = function(search) {","\tif(this.cs === false) {","\t\tsearch = search.toLowerCase();","\t}","","\tfunction recurse(node, search, stringAgg, resultsAgg) {","\t\t// Check if this is a word.","\t\tif(node.$) {","\t\t\tresultsAgg.push(stringAgg);","\t\t}","","\t\t// Check if the have completed the seearch","\t\tif(search.length === 0) {","\t\t\treturn resultsAgg;","\t\t}","","\t\t// Otherwise, continue searching","\t\tvar next = node.dictionary[search[0]];","\t\tif(!next) {","\t\t\treturn resultsAgg;","\t\t}","\t\treturn recurse(next, search.substring(1), stringAgg + search[0], resultsAgg);","\t};","","\treturn recurse(this, search, \"\", []);","};","","/**"," * Returns the longest match and the remaining part that could not be matched."," * inspired by [NLTK containers.trie.find_prefix](http://nltk.googlecode.com/svn-/trunk/doc/api/nltk.containers.Trie-class.html)."," **/","Trie.prototype.findPrefix = function(search) {","\tif(this.cs === false) {","\t\tsearch = search.toLowerCase();","\t}","\t","\tfunction recurse(node, search, stringAgg, lastWord) {","\t\t// Check if this is a word","\t\tif(node.$) {","\t\t\tlastWord = stringAgg;","\t\t}","","\t\t// Check if we have no more to search","\t\tif(search.length === 0) {","\t\t\treturn [lastWord, search];","\t\t}","","\t\t// Continue searching","\t\tvar next = node.dictionary[search[0]];","\t\tif(!next) {","\t\t\treturn [lastWord, search];","\t\t}","\t\treturn recurse(next, search.substring(1), stringAgg + search[0], lastWord);","\t};","","\treturn recurse(this, search, \"\", null);","};","","/**"," * Computes the number of actual nodes from this node to the end."," * Note: This involves traversing the entire structure and may not be"," * good for frequent use."," **/","Trie.prototype.getSize = function() { ","\tvar total = 1;","\tfor(var c in this.dictionary) {","\t\ttotal += this.dictionary[c].getSize();","\t}","\treturn total;","};","","/**"," * EXPORT THE TRIE"," **/","module.exports = Trie;","",""],"l":{"26":1,"27":0,"28":0,"30":0,"31":0,"34":0,"41":1,"42":0,"43":0,"47":0,"48":0,"49":0,"50":0,"54":0,"56":0,"57":0,"58":0,"62":0,"68":1,"69":0,"70":0,"83":1,"84":0,"85":0,"88":1,"89":0,"90":0,"93":1,"94":0,"95":0,"96":0,"99":1,"100":0,"103":0,"104":0,"107":0,"108":0,"111":0,"112":0,"116":0,"117":0,"118":0,"125":1,"126":0,"127":0,"130":0,"131":0,"135":0,"136":0,"139":0,"140":0,"144":0,"156":1,"157":0,"158":0,"161":1,"163":0,"164":0,"168":0,"169":0,"173":0,"174":0,"175":0,"177":0,"180":0,"187":1,"188":0,"189":0,"192":1,"194":0,"195":0,"199":0,"200":0,"204":0,"205":0,"206":0,"208":0,"211":0,"219":1,"220":0,"221":0,"222":0,"224":0,"230":1}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/tools/buffered-reader.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/tools/buffered-reader.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":1,"40":1,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":1,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":1,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":1,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":1,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":1,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":1,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},"fnMap":{"1":{"name":"(anonymous_1)","line":27,"loc":{"start":{"line":27,"column":21},"end":{"line":27,"column":50}}},"2":{"name":"(anonymous_2)","line":65,"loc":{"start":{"line":65,"column":37},"end":{"line":65,"column":48}}},"3":{"name":"(anonymous_3)","line":69,"loc":{"start":{"line":69,"column":32},"end":{"line":69,"column":43}}},"4":{"name":"(anonymous_4)","line":87,"loc":{"start":{"line":87,"column":21},"end":{"line":87,"column":36}}},"5":{"name":"(anonymous_5)","line":144,"loc":{"start":{"line":144,"column":20},"end":{"line":144,"column":31}}},"6":{"name":"(anonymous_6)","line":152,"loc":{"start":{"line":152,"column":22},"end":{"line":152,"column":38}}},"7":{"name":"(anonymous_7)","line":158,"loc":{"start":{"line":158,"column":33},"end":{"line":158,"column":46}}},"8":{"name":"(anonymous_8)","line":160,"loc":{"start":{"line":160,"column":27},"end":{"line":160,"column":50}}},"9":{"name":"(anonymous_9)","line":181,"loc":{"start":{"line":181,"column":33},"end":{"line":181,"column":46}}},"10":{"name":"(anonymous_10)","line":184,"loc":{"start":{"line":184,"column":62},"end":{"line":184,"column":89}}},"11":{"name":"(anonymous_11)","line":198,"loc":{"start":{"line":198,"column":38},"end":{"line":198,"column":58}}},"12":{"name":"(anonymous_12)","line":202,"loc":{"start":{"line":202,"column":16},"end":{"line":202,"column":32}}},"13":{"name":"(anonymous_13)","line":209,"loc":{"start":{"line":209,"column":13},"end":{"line":209,"column":24}}},"14":{"name":"(anonymous_14)","line":236,"loc":{"start":{"line":236,"column":18},"end":{"line":236,"column":34}}},"15":{"name":"(anonymous_15)","line":274,"loc":{"start":{"line":274,"column":16},"end":{"line":274,"column":32}}},"16":{"name":"(anonymous_16)","line":298,"loc":{"start":{"line":298,"column":33},"end":{"line":298,"column":46}}},"17":{"name":"(anonymous_17)","line":306,"loc":{"start":{"line":306,"column":22},"end":{"line":306,"column":38}}},"18":{"name":"(anonymous_18)","line":313,"loc":{"start":{"line":313,"column":37},"end":{"line":313,"column":57}}},"19":{"name":"(anonymous_19)","line":317,"loc":{"start":{"line":317,"column":13},"end":{"line":317,"column":24}}},"20":{"name":"(anonymous_20)","line":319,"loc":{"start":{"line":319,"column":32},"end":{"line":319,"column":52}}},"21":{"name":"(anonymous_21)","line":324,"loc":{"start":{"line":324,"column":16},"end":{"line":324,"column":32}}},"22":{"name":"(anonymous_22)","line":333,"loc":{"start":{"line":333,"column":16},"end":{"line":333,"column":32}}},"23":{"name":"(anonymous_23)","line":344,"loc":{"start":{"line":344,"column":32},"end":{"line":344,"column":53}}},"24":{"name":"(anonymous_24)","line":348,"loc":{"start":{"line":348,"column":13},"end":{"line":348,"column":24}}},"25":{"name":"(anonymous_25)","line":371,"loc":{"start":{"line":371,"column":16},"end":{"line":371,"column":32}}},"26":{"name":"(anonymous_26)","line":381,"loc":{"start":{"line":381,"column":32},"end":{"line":381,"column":52}}},"27":{"name":"(anonymous_27)","line":385,"loc":{"start":{"line":385,"column":13},"end":{"line":385,"column":24}}},"28":{"name":"(anonymous_28)","line":388,"loc":{"start":{"line":388,"column":58},"end":{"line":388,"column":69}}},"29":{"name":"(anonymous_29)","line":395,"loc":{"start":{"line":395,"column":16},"end":{"line":395,"column":32}}}},"statementMap":{"1":{"start":{"line":14,"column":0},"end":{"line":14,"column":32}},"2":{"start":{"line":15,"column":0},"end":{"line":15,"column":24}},"3":{"start":{"line":17,"column":0},"end":{"line":17,"column":24}},"4":{"start":{"line":19,"column":0},"end":{"line":19,"column":68}},"5":{"start":{"line":20,"column":0},"end":{"line":20,"column":83}},"6":{"start":{"line":21,"column":0},"end":{"line":21,"column":79}},"7":{"start":{"line":22,"column":0},"end":{"line":22,"column":96}},"8":{"start":{"line":23,"column":0},"end":{"line":23,"column":86}},"9":{"start":{"line":24,"column":0},"end":{"line":24,"column":76}},"10":{"start":{"line":25,"column":0},"end":{"line":25,"column":48}},"11":{"start":{"line":27,"column":0},"end":{"line":60,"column":2}},"12":{"start":{"line":28,"column":2},"end":{"line":28,"column":34}},"13":{"start":{"line":30,"column":2},"end":{"line":30,"column":28}},"14":{"start":{"line":32,"column":2},"end":{"line":32,"column":58}},"15":{"start":{"line":32,"column":33},"end":{"line":32,"column":58}},"16":{"start":{"line":33,"column":2},"end":{"line":38,"column":4}},"17":{"start":{"line":40,"column":2},"end":{"line":40,"column":75}},"18":{"start":{"line":40,"column":37},"end":{"line":40,"column":75}},"19":{"start":{"line":41,"column":2},"end":{"line":41,"column":71}},"20":{"start":{"line":41,"column":32},"end":{"line":41,"column":71}},"21":{"start":{"line":42,"column":2},"end":{"line":42,"column":67}},"22":{"start":{"line":42,"column":30},"end":{"line":42,"column":67}},"23":{"start":{"line":43,"column":2},"end":{"line":43,"column":88}},"24":{"start":{"line":43,"column":49},"end":{"line":43,"column":88}},"25":{"start":{"line":45,"column":2},"end":{"line":45,"column":28}},"26":{"start":{"line":46,"column":2},"end":{"line":46,"column":18}},"27":{"start":{"line":47,"column":2},"end":{"line":47,"column":22}},"28":{"start":{"line":49,"column":2},"end":{"line":49,"column":42}},"29":{"start":{"line":50,"column":2},"end":{"line":50,"column":25}},"30":{"start":{"line":51,"column":2},"end":{"line":51,"column":23}},"31":{"start":{"line":52,"column":2},"end":{"line":52,"column":42}},"32":{"start":{"line":54,"column":2},"end":{"line":54,"column":24}},"33":{"start":{"line":55,"column":2},"end":{"line":55,"column":28}},"34":{"start":{"line":56,"column":2},"end":{"line":56,"column":28}},"35":{"start":{"line":57,"column":2},"end":{"line":57,"column":22}},"36":{"start":{"line":58,"column":2},"end":{"line":58,"column":30}},"37":{"start":{"line":59,"column":2},"end":{"line":59,"column":25}},"38":{"start":{"line":62,"column":0},"end":{"line":62,"column":73}},"39":{"start":{"line":63,"column":0},"end":{"line":63,"column":54}},"40":{"start":{"line":65,"column":0},"end":{"line":67,"column":2}},"41":{"start":{"line":66,"column":2},"end":{"line":66,"column":27}},"42":{"start":{"line":69,"column":0},"end":{"line":156,"column":2}},"43":{"start":{"line":70,"column":2},"end":{"line":70,"column":68}},"44":{"start":{"line":73,"column":2},"end":{"line":73,"column":44}},"45":{"start":{"line":75,"column":2},"end":{"line":75,"column":16}},"46":{"start":{"line":76,"column":2},"end":{"line":76,"column":13}},"47":{"start":{"line":77,"column":2},"end":{"line":77,"column":16}},"48":{"start":{"line":78,"column":2},"end":{"line":80,"column":19}},"49":{"start":{"line":82,"column":2},"end":{"line":85,"column":38}},"50":{"start":{"line":87,"column":2},"end":{"line":142,"column":5}},"51":{"start":{"line":88,"column":4},"end":{"line":88,"column":18}},"52":{"start":{"line":89,"column":4},"end":{"line":89,"column":19}},"53":{"start":{"line":90,"column":4},"end":{"line":90,"column":14}},"54":{"start":{"line":91,"column":4},"end":{"line":91,"column":18}},"55":{"start":{"line":92,"column":4},"end":{"line":92,"column":26}},"56":{"start":{"line":94,"column":4},"end":{"line":132,"column":5}},"57":{"start":{"line":95,"column":6},"end":{"line":125,"column":7}},"58":{"start":{"line":96,"column":8},"end":{"line":96,"column":35}},"59":{"start":{"line":96,"column":29},"end":{"line":96,"column":35}},"60":{"start":{"line":98,"column":8},"end":{"line":98,"column":28}},"61":{"start":{"line":99,"column":8},"end":{"line":104,"column":9}},"62":{"start":{"line":100,"column":10},"end":{"line":100,"column":97}},"63":{"start":{"line":102,"column":10},"end":{"line":102,"column":64}},"64":{"start":{"line":103,"column":10},"end":{"line":103,"column":19}},"65":{"start":{"line":106,"column":8},"end":{"line":106,"column":30}},"66":{"start":{"line":106,"column":21},"end":{"line":106,"column":30}},"67":{"start":{"line":107,"column":8},"end":{"line":124,"column":9}},"68":{"start":{"line":108,"column":10},"end":{"line":108,"column":41}},"69":{"start":{"line":110,"column":10},"end":{"line":112,"column":11}},"70":{"start":{"line":111,"column":12},"end":{"line":111,"column":45}},"71":{"start":{"line":114,"column":10},"end":{"line":116,"column":11}},"72":{"start":{"line":115,"column":12},"end":{"line":115,"column":16}},"73":{"start":{"line":118,"column":10},"end":{"line":118,"column":68}},"74":{"start":{"line":119,"column":10},"end":{"line":119,"column":25}},"75":{"start":{"line":120,"column":10},"end":{"line":123,"column":13}},"76":{"start":{"line":121,"column":14},"end":{"line":121,"column":45}},"77":{"start":{"line":122,"column":14},"end":{"line":122,"column":31}},"78":{"start":{"line":127,"column":6},"end":{"line":130,"column":7}},"79":{"start":{"line":128,"column":8},"end":{"line":128,"column":58}},"80":{"start":{"line":129,"column":8},"end":{"line":129,"column":57}},"81":{"start":{"line":131,"column":6},"end":{"line":131,"column":27}},"82":{"start":{"line":134,"column":4},"end":{"line":134,"column":41}},"83":{"start":{"line":135,"column":4},"end":{"line":139,"column":5}},"84":{"start":{"line":136,"column":6},"end":{"line":136,"column":30}},"85":{"start":{"line":137,"column":6},"end":{"line":137,"column":24}},"86":{"start":{"line":138,"column":6},"end":{"line":138,"column":22}},"87":{"start":{"line":140,"column":4},"end":{"line":140,"column":22}},"88":{"start":{"line":144,"column":2},"end":{"line":150,"column":5}},"89":{"start":{"line":145,"column":4},"end":{"line":145,"column":28}},"90":{"start":{"line":146,"column":4},"end":{"line":148,"column":5}},"91":{"start":{"line":147,"column":6},"end":{"line":147,"column":34}},"92":{"start":{"line":149,"column":4},"end":{"line":149,"column":20}},"93":{"start":{"line":152,"column":2},"end":{"line":155,"column":5}},"94":{"start":{"line":153,"column":4},"end":{"line":153,"column":28}},"95":{"start":{"line":154,"column":4},"end":{"line":154,"column":29}},"96":{"start":{"line":158,"column":0},"end":{"line":179,"column":2}},"97":{"start":{"line":159,"column":2},"end":{"line":159,"column":16}},"98":{"start":{"line":160,"column":2},"end":{"line":178,"column":5}},"99":{"start":{"line":161,"column":4},"end":{"line":161,"column":33}},"100":{"start":{"line":161,"column":15},"end":{"line":161,"column":33}},"101":{"start":{"line":162,"column":4},"end":{"line":177,"column":5}},"102":{"start":{"line":163,"column":6},"end":{"line":166,"column":7}},"103":{"start":{"line":164,"column":8},"end":{"line":164,"column":25}},"104":{"start":{"line":165,"column":8},"end":{"line":165,"column":25}},"105":{"start":{"line":167,"column":6},"end":{"line":169,"column":7}},"106":{"start":{"line":168,"column":8},"end":{"line":168,"column":38}},"107":{"start":{"line":170,"column":6},"end":{"line":172,"column":7}},"108":{"start":{"line":171,"column":8},"end":{"line":171,"column":42}},"109":{"start":{"line":173,"column":6},"end":{"line":173,"column":32}},"110":{"start":{"line":174,"column":6},"end":{"line":174,"column":16}},"111":{"start":{"line":176,"column":6},"end":{"line":176,"column":37}},"112":{"start":{"line":181,"column":0},"end":{"line":196,"column":2}},"113":{"start":{"line":182,"column":2},"end":{"line":182,"column":16}},"114":{"start":{"line":183,"column":2},"end":{"line":183,"column":39}},"115":{"start":{"line":184,"column":2},"end":{"line":195,"column":5}},"116":{"start":{"line":185,"column":4},"end":{"line":185,"column":33}},"117":{"start":{"line":185,"column":15},"end":{"line":185,"column":33}},"118":{"start":{"line":187,"column":4},"end":{"line":187,"column":32}},"119":{"start":{"line":188,"column":4},"end":{"line":190,"column":5}},"120":{"start":{"line":189,"column":6},"end":{"line":189,"column":31}},"121":{"start":{"line":191,"column":4},"end":{"line":193,"column":5}},"122":{"start":{"line":192,"column":6},"end":{"line":192,"column":51}},"123":{"start":{"line":194,"column":4},"end":{"line":194,"column":14}},"124":{"start":{"line":198,"column":0},"end":{"line":296,"column":2}},"125":{"start":{"line":199,"column":2},"end":{"line":207,"column":3}},"126":{"start":{"line":200,"column":4},"end":{"line":200,"column":27}},"127":{"start":{"line":201,"column":4},"end":{"line":201,"column":18}},"128":{"start":{"line":202,"column":4},"end":{"line":205,"column":7}},"129":{"start":{"line":203,"column":6},"end":{"line":203,"column":45}},"130":{"start":{"line":203,"column":17},"end":{"line":203,"column":45}},"131":{"start":{"line":204,"column":6},"end":{"line":204,"column":32}},"132":{"start":{"line":206,"column":4},"end":{"line":206,"column":11}},"133":{"start":{"line":209,"column":2},"end":{"line":243,"column":4}},"134":{"start":{"line":210,"column":4},"end":{"line":210,"column":41}},"135":{"start":{"line":211,"column":4},"end":{"line":211,"column":57}},"136":{"start":{"line":212,"column":4},"end":{"line":212,"column":57}},"137":{"start":{"line":214,"column":4},"end":{"line":214,"column":85}},"138":{"start":{"line":215,"column":4},"end":{"line":215,"column":28}},"139":{"start":{"line":216,"column":4},"end":{"line":216,"column":26}},"140":{"start":{"line":218,"column":4},"end":{"line":221,"column":5}},"141":{"start":{"line":219,"column":6},"end":{"line":219,"column":27}},"142":{"start":{"line":220,"column":6},"end":{"line":220,"column":26}},"143":{"start":{"line":222,"column":4},"end":{"line":222,"column":26}},"144":{"start":{"line":224,"column":4},"end":{"line":242,"column":5}},"145":{"start":{"line":225,"column":6},"end":{"line":225,"column":25}},"146":{"start":{"line":226,"column":6},"end":{"line":226,"column":36}},"147":{"start":{"line":227,"column":6},"end":{"line":227,"column":29}},"148":{"start":{"line":229,"column":6},"end":{"line":241,"column":7}},"149":{"start":{"line":230,"column":8},"end":{"line":230,"column":25}},"150":{"start":{"line":231,"column":8},"end":{"line":231,"column":29}},"151":{"start":{"line":232,"column":8},"end":{"line":232,"column":27}},"152":{"start":{"line":233,"column":8},"end":{"line":233,"column":44}},"153":{"start":{"line":235,"column":8},"end":{"line":235,"column":29}},"154":{"start":{"line":236,"column":8},"end":{"line":240,"column":11}},"155":{"start":{"line":237,"column":10},"end":{"line":237,"column":49}},"156":{"start":{"line":237,"column":21},"end":{"line":237,"column":49}},"157":{"start":{"line":239,"column":10},"end":{"line":239,"column":18}},"158":{"start":{"line":245,"column":2},"end":{"line":245,"column":16}},"159":{"start":{"line":247,"column":2},"end":{"line":247,"column":50}},"160":{"start":{"line":248,"column":2},"end":{"line":248,"column":36}},"161":{"start":{"line":249,"column":2},"end":{"line":249,"column":45}},"162":{"start":{"line":249,"column":19},"end":{"line":249,"column":45}},"163":{"start":{"line":251,"column":2},"end":{"line":251,"column":32}},"164":{"start":{"line":252,"column":2},"end":{"line":252,"column":30}},"165":{"start":{"line":254,"column":2},"end":{"line":295,"column":3}},"166":{"start":{"line":255,"column":4},"end":{"line":255,"column":39}},"167":{"start":{"line":257,"column":4},"end":{"line":292,"column":5}},"168":{"start":{"line":258,"column":6},"end":{"line":258,"column":55}},"169":{"start":{"line":259,"column":6},"end":{"line":259,"column":29}},"170":{"start":{"line":260,"column":6},"end":{"line":260,"column":30}},"171":{"start":{"line":261,"column":6},"end":{"line":261,"column":29}},"172":{"start":{"line":263,"column":6},"end":{"line":263,"column":40}},"173":{"start":{"line":264,"column":6},"end":{"line":264,"column":29}},"174":{"start":{"line":266,"column":6},"end":{"line":268,"column":7}},"175":{"start":{"line":267,"column":8},"end":{"line":267,"column":77}},"176":{"start":{"line":269,"column":6},"end":{"line":272,"column":7}},"177":{"start":{"line":270,"column":8},"end":{"line":270,"column":25}},"178":{"start":{"line":271,"column":8},"end":{"line":271,"column":53}},"179":{"start":{"line":274,"column":6},"end":{"line":291,"column":9}},"180":{"start":{"line":275,"column":8},"end":{"line":275,"column":47}},"181":{"start":{"line":275,"column":19},"end":{"line":275,"column":47}},"182":{"start":{"line":277,"column":8},"end":{"line":277,"column":32}},"183":{"start":{"line":278,"column":8},"end":{"line":278,"column":37}},"184":{"start":{"line":279,"column":8},"end":{"line":290,"column":9}},"185":{"start":{"line":280,"column":10},"end":{"line":280,"column":32}},"186":{"start":{"line":281,"column":10},"end":{"line":281,"column":27}},"187":{"start":{"line":282,"column":10},"end":{"line":282,"column":47}},"188":{"start":{"line":283,"column":10},"end":{"line":283,"column":37}},"189":{"start":{"line":284,"column":10},"end":{"line":284,"column":58}},"190":{"start":{"line":286,"column":10},"end":{"line":286,"column":38}},"191":{"start":{"line":287,"column":10},"end":{"line":287,"column":39}},"192":{"start":{"line":288,"column":10},"end":{"line":288,"column":60}},"193":{"start":{"line":289,"column":10},"end":{"line":289,"column":33}},"194":{"start":{"line":294,"column":4},"end":{"line":294,"column":12}},"195":{"start":{"line":298,"column":0},"end":{"line":311,"column":2}},"196":{"start":{"line":299,"column":2},"end":{"line":299,"column":30}},"197":{"start":{"line":299,"column":10},"end":{"line":299,"column":30}},"198":{"start":{"line":300,"column":2},"end":{"line":303,"column":3}},"199":{"start":{"line":301,"column":4},"end":{"line":301,"column":22}},"200":{"start":{"line":301,"column":12},"end":{"line":301,"column":22}},"201":{"start":{"line":302,"column":4},"end":{"line":302,"column":11}},"202":{"start":{"line":305,"column":2},"end":{"line":305,"column":16}},"203":{"start":{"line":306,"column":2},"end":{"line":310,"column":5}},"204":{"start":{"line":307,"column":4},"end":{"line":307,"column":18}},"205":{"start":{"line":308,"column":4},"end":{"line":308,"column":22}},"206":{"start":{"line":309,"column":4},"end":{"line":309,"column":23}},"207":{"start":{"line":309,"column":12},"end":{"line":309,"column":23}},"208":{"start":{"line":313,"column":0},"end":{"line":342,"column":2}},"209":{"start":{"line":314,"column":2},"end":{"line":314,"column":22}},"210":{"start":{"line":315,"column":2},"end":{"line":315,"column":58}},"211":{"start":{"line":315,"column":32},"end":{"line":315,"column":58}},"212":{"start":{"line":317,"column":2},"end":{"line":329,"column":4}},"213":{"start":{"line":318,"column":4},"end":{"line":318,"column":45}},"214":{"start":{"line":318,"column":19},"end":{"line":318,"column":45}},"215":{"start":{"line":319,"column":4},"end":{"line":328,"column":7}},"216":{"start":{"line":320,"column":6},"end":{"line":320,"column":45}},"217":{"start":{"line":320,"column":17},"end":{"line":320,"column":45}},"218":{"start":{"line":322,"column":6},"end":{"line":322,"column":18}},"219":{"start":{"line":323,"column":6},"end":{"line":323,"column":56}},"220":{"start":{"line":324,"column":6},"end":{"line":327,"column":9}},"221":{"start":{"line":325,"column":8},"end":{"line":325,"column":47}},"222":{"start":{"line":325,"column":19},"end":{"line":325,"column":47}},"223":{"start":{"line":326,"column":8},"end":{"line":326,"column":34}},"224":{"start":{"line":331,"column":2},"end":{"line":331,"column":16}},"225":{"start":{"line":332,"column":2},"end":{"line":341,"column":3}},"226":{"start":{"line":333,"column":4},"end":{"line":337,"column":7}},"227":{"start":{"line":334,"column":6},"end":{"line":334,"column":41}},"228":{"start":{"line":334,"column":17},"end":{"line":334,"column":41}},"229":{"start":{"line":335,"column":6},"end":{"line":335,"column":29}},"230":{"start":{"line":336,"column":6},"end":{"line":336,"column":14}},"231":{"start":{"line":339,"column":4},"end":{"line":339,"column":34}},"232":{"start":{"line":339,"column":19},"end":{"line":339,"column":34}},"233":{"start":{"line":340,"column":4},"end":{"line":340,"column":32}},"234":{"start":{"line":344,"column":0},"end":{"line":379,"column":2}},"235":{"start":{"line":345,"column":2},"end":{"line":345,"column":22}},"236":{"start":{"line":346,"column":2},"end":{"line":346,"column":62}},"237":{"start":{"line":346,"column":18},"end":{"line":346,"column":62}},"238":{"start":{"line":348,"column":2},"end":{"line":367,"column":4}},"239":{"start":{"line":349,"column":4},"end":{"line":349,"column":33}},"240":{"start":{"line":350,"column":4},"end":{"line":365,"column":5}},"241":{"start":{"line":351,"column":6},"end":{"line":351,"column":23}},"242":{"start":{"line":353,"column":6},"end":{"line":353,"column":24}},"243":{"start":{"line":354,"column":6},"end":{"line":354,"column":72}},"244":{"start":{"line":355,"column":6},"end":{"line":364,"column":7}},"245":{"start":{"line":356,"column":8},"end":{"line":356,"column":42}},"246":{"start":{"line":357,"column":8},"end":{"line":357,"column":32}},"247":{"start":{"line":359,"column":8},"end":{"line":359,"column":45}},"248":{"start":{"line":360,"column":8},"end":{"line":360,"column":34}},"249":{"start":{"line":361,"column":8},"end":{"line":361,"column":32}},"250":{"start":{"line":362,"column":8},"end":{"line":362,"column":29}},"251":{"start":{"line":363,"column":8},"end":{"line":363,"column":32}},"252":{"start":{"line":366,"column":4},"end":{"line":366,"column":14}},"253":{"start":{"line":369,"column":2},"end":{"line":369,"column":16}},"254":{"start":{"line":370,"column":2},"end":{"line":378,"column":3}},"255":{"start":{"line":371,"column":4},"end":{"line":375,"column":7}},"256":{"start":{"line":372,"column":6},"end":{"line":372,"column":41}},"257":{"start":{"line":372,"column":17},"end":{"line":372,"column":41}},"258":{"start":{"line":373,"column":6},"end":{"line":373,"column":29}},"259":{"start":{"line":374,"column":6},"end":{"line":374,"column":14}},"260":{"start":{"line":377,"column":4},"end":{"line":377,"column":12}},"261":{"start":{"line":381,"column":0},"end":{"line":403,"column":2}},"262":{"start":{"line":382,"column":2},"end":{"line":382,"column":22}},"263":{"start":{"line":383,"column":2},"end":{"line":383,"column":52}},"264":{"start":{"line":383,"column":32},"end":{"line":383,"column":52}},"265":{"start":{"line":385,"column":2},"end":{"line":391,"column":4}},"266":{"start":{"line":386,"column":4},"end":{"line":386,"column":58}},"267":{"start":{"line":387,"column":4},"end":{"line":387,"column":51}},"268":{"start":{"line":388,"column":4},"end":{"line":390,"column":7}},"269":{"start":{"line":389,"column":6},"end":{"line":389,"column":23}},"270":{"start":{"line":393,"column":2},"end":{"line":393,"column":16}},"271":{"start":{"line":394,"column":2},"end":{"line":402,"column":3}},"272":{"start":{"line":395,"column":4},"end":{"line":399,"column":7}},"273":{"start":{"line":396,"column":6},"end":{"line":396,"column":41}},"274":{"start":{"line":396,"column":17},"end":{"line":396,"column":41}},"275":{"start":{"line":397,"column":6},"end":{"line":397,"column":29}},"276":{"start":{"line":398,"column":6},"end":{"line":398,"column":14}},"277":{"start":{"line":401,"column":4},"end":{"line":401,"column":12}},"278":{"start":{"line":405,"column":0},"end":{"line":405,"column":32}}},"branchMap":{"1":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":13},"end":{"line":30,"column":21}},{"start":{"line":30,"column":25},"end":{"line":30,"column":27}}]},"2":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":2},"end":{"line":32,"column":2}},{"start":{"line":32,"column":2},"end":{"line":32,"column":2}}]},"3":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":16},"end":{"line":34,"column":35}},{"start":{"line":34,"column":39},"end":{"line":34,"column":50}}]},"4":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":14},"end":{"line":35,"column":31}},{"start":{"line":35,"column":35},"end":{"line":35,"column":39}}]},"5":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":11},"end":{"line":36,"column":25}},{"start":{"line":36,"column":29},"end":{"line":36,"column":30}}]},"6":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":40,"column":2}},{"start":{"line":40,"column":2},"end":{"line":40,"column":2}}]},"7":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":2},"end":{"line":41,"column":2}},{"start":{"line":41,"column":2},"end":{"line":41,"column":2}}]},"8":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":2},"end":{"line":42,"column":2}},{"start":{"line":42,"column":2},"end":{"line":42,"column":2}}]},"9":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":2},"end":{"line":43,"column":2}},{"start":{"line":43,"column":2},"end":{"line":43,"column":2}}]},"10":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":11},"end":{"line":85,"column":17}},{"start":{"line":85,"column":21},"end":{"line":85,"column":27}},{"start":{"line":85,"column":31},"end":{"line":85,"column":37}}]},"11":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":4},"end":{"line":94,"column":4}},{"start":{"line":94,"column":4},"end":{"line":94,"column":4}}]},"12":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":8},"end":{"line":96,"column":8}},{"start":{"line":96,"column":8},"end":{"line":96,"column":8}}]},"13":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":8},"end":{"line":99,"column":8}},{"start":{"line":99,"column":8},"end":{"line":99,"column":8}}]},"14":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":10},"end":{"line":100,"column":16}},{"start":{"line":100,"column":20},"end":{"line":100,"column":96}}]},"15":{"line":100,"type":"cond-expr","locations":[{"start":{"line":100,"column":63},"end":{"line":100,"column":67}},{"start":{"line":100,"column":70},"end":{"line":100,"column":79}}]},"16":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":10},"end":{"line":102,"column":16}},{"start":{"line":102,"column":20},"end":{"line":102,"column":63}}]},"17":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":8}},{"start":{"line":106,"column":8},"end":{"line":106,"column":8}}]},"18":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":107,"column":8}},{"start":{"line":107,"column":8},"end":{"line":107,"column":8}}]},"19":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":12},"end":{"line":107,"column":30}},{"start":{"line":107,"column":34},"end":{"line":107,"column":52}}]},"20":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":10},"end":{"line":110,"column":10}},{"start":{"line":110,"column":10},"end":{"line":110,"column":10}}]},"21":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":10},"end":{"line":114,"column":10}},{"start":{"line":114,"column":10},"end":{"line":114,"column":10}}]},"22":{"line":114,"type":"binary-expr","locations":[{"start":{"line":114,"column":14},"end":{"line":114,"column":27}},{"start":{"line":114,"column":31},"end":{"line":114,"column":49}},{"start":{"line":114,"column":53},"end":{"line":114,"column":73}}]},"23":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":10},"end":{"line":120,"column":10}},{"start":{"line":120,"column":10},"end":{"line":120,"column":10}}]},"24":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":6},"end":{"line":127,"column":6}},{"start":{"line":127,"column":6},"end":{"line":127,"column":6}}]},"25":{"line":127,"type":"binary-expr","locations":[{"start":{"line":127,"column":10},"end":{"line":127,"column":25}},{"start":{"line":127,"column":29},"end":{"line":127,"column":43}}]},"26":{"line":128,"type":"cond-expr","locations":[{"start":{"line":128,"column":31},"end":{"line":128,"column":35}},{"start":{"line":128,"column":38},"end":{"line":128,"column":57}}]},"27":{"line":129,"type":"cond-expr","locations":[{"start":{"line":129,"column":32},"end":{"line":129,"column":52}},{"start":{"line":129,"column":55},"end":{"line":129,"column":56}}]},"28":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":4},"end":{"line":135,"column":4}},{"start":{"line":135,"column":4},"end":{"line":135,"column":4}}]},"29":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":4},"end":{"line":146,"column":4}},{"start":{"line":146,"column":4},"end":{"line":146,"column":4}}]},"30":{"line":146,"type":"binary-expr","locations":[{"start":{"line":146,"column":8},"end":{"line":146,"column":12}},{"start":{"line":146,"column":16},"end":{"line":146,"column":25}}]},"31":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":4},"end":{"line":161,"column":4}},{"start":{"line":161,"column":4},"end":{"line":161,"column":4}}]},"32":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":4},"end":{"line":162,"column":4}},{"start":{"line":162,"column":4},"end":{"line":162,"column":4}}]},"33":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":6},"end":{"line":163,"column":6}},{"start":{"line":163,"column":6},"end":{"line":163,"column":6}}]},"34":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":6},"end":{"line":167,"column":6}},{"start":{"line":167,"column":6},"end":{"line":167,"column":6}}]},"35":{"line":167,"type":"binary-expr","locations":[{"start":{"line":167,"column":10},"end":{"line":167,"column":27}},{"start":{"line":167,"column":31},"end":{"line":167,"column":53}}]},"36":{"line":170,"type":"if","locations":[{"start":{"line":170,"column":6},"end":{"line":170,"column":6}},{"start":{"line":170,"column":6},"end":{"line":170,"column":6}}]},"37":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":4},"end":{"line":185,"column":4}},{"start":{"line":185,"column":4},"end":{"line":185,"column":4}}]},"38":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":4},"end":{"line":188,"column":4}},{"start":{"line":188,"column":4},"end":{"line":188,"column":4}}]},"39":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":4},"end":{"line":191,"column":4}},{"start":{"line":191,"column":4},"end":{"line":191,"column":4}}]},"40":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":2},"end":{"line":199,"column":2}},{"start":{"line":199,"column":2},"end":{"line":199,"column":2}}]},"41":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":6},"end":{"line":203,"column":6}},{"start":{"line":203,"column":6},"end":{"line":203,"column":6}}]},"42":{"line":212,"type":"cond-expr","locations":[{"start":{"line":212,"column":37},"end":{"line":212,"column":46}},{"start":{"line":212,"column":49},"end":{"line":212,"column":56}}]},"43":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":4},"end":{"line":218,"column":4}},{"start":{"line":218,"column":4},"end":{"line":218,"column":4}}]},"44":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":4},"end":{"line":224,"column":4}},{"start":{"line":224,"column":4},"end":{"line":224,"column":4}}]},"45":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":6},"end":{"line":229,"column":6}},{"start":{"line":229,"column":6},"end":{"line":229,"column":6}}]},"46":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":10},"end":{"line":237,"column":10}},{"start":{"line":237,"column":10},"end":{"line":237,"column":10}}]},"47":{"line":248,"type":"cond-expr","locations":[{"start":{"line":248,"column":24},"end":{"line":248,"column":27}},{"start":{"line":248,"column":30},"end":{"line":248,"column":35}}]},"48":{"line":249,"type":"if","locations":[{"start":{"line":249,"column":2},"end":{"line":249,"column":2}},{"start":{"line":249,"column":2},"end":{"line":249,"column":2}}]},"49":{"line":254,"type":"if","locations":[{"start":{"line":254,"column":2},"end":{"line":254,"column":2}},{"start":{"line":254,"column":2},"end":{"line":254,"column":2}}]},"50":{"line":257,"type":"if","locations":[{"start":{"line":257,"column":4},"end":{"line":257,"column":4}},{"start":{"line":257,"column":4},"end":{"line":257,"column":4}}]},"51":{"line":266,"type":"if","locations":[{"start":{"line":266,"column":6},"end":{"line":266,"column":6}},{"start":{"line":266,"column":6},"end":{"line":266,"column":6}}]},"52":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":6},"end":{"line":269,"column":6}},{"start":{"line":269,"column":6},"end":{"line":269,"column":6}}]},"53":{"line":275,"type":"if","locations":[{"start":{"line":275,"column":8},"end":{"line":275,"column":8}},{"start":{"line":275,"column":8},"end":{"line":275,"column":8}}]},"54":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":8},"end":{"line":279,"column":8}},{"start":{"line":279,"column":8},"end":{"line":279,"column":8}}]},"55":{"line":299,"type":"if","locations":[{"start":{"line":299,"column":2},"end":{"line":299,"column":2}},{"start":{"line":299,"column":2},"end":{"line":299,"column":2}}]},"56":{"line":300,"type":"if","locations":[{"start":{"line":300,"column":2},"end":{"line":300,"column":2}},{"start":{"line":300,"column":2},"end":{"line":300,"column":2}}]},"57":{"line":301,"type":"if","locations":[{"start":{"line":301,"column":4},"end":{"line":301,"column":4}},{"start":{"line":301,"column":4},"end":{"line":301,"column":4}}]},"58":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":4},"end":{"line":309,"column":4}},{"start":{"line":309,"column":4},"end":{"line":309,"column":4}}]},"59":{"line":315,"type":"if","locations":[{"start":{"line":315,"column":2},"end":{"line":315,"column":2}},{"start":{"line":315,"column":2},"end":{"line":315,"column":2}}]},"60":{"line":315,"type":"binary-expr","locations":[{"start":{"line":315,"column":6},"end":{"line":315,"column":15}},{"start":{"line":315,"column":19},"end":{"line":315,"column":30}}]},"61":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":4},"end":{"line":318,"column":4}},{"start":{"line":318,"column":4},"end":{"line":318,"column":4}}]},"62":{"line":320,"type":"if","locations":[{"start":{"line":320,"column":6},"end":{"line":320,"column":6}},{"start":{"line":320,"column":6},"end":{"line":320,"column":6}}]},"63":{"line":325,"type":"if","locations":[{"start":{"line":325,"column":8},"end":{"line":325,"column":8}},{"start":{"line":325,"column":8},"end":{"line":325,"column":8}}]},"64":{"line":332,"type":"if","locations":[{"start":{"line":332,"column":2},"end":{"line":332,"column":2}},{"start":{"line":332,"column":2},"end":{"line":332,"column":2}}]},"65":{"line":334,"type":"if","locations":[{"start":{"line":334,"column":6},"end":{"line":334,"column":6}},{"start":{"line":334,"column":6},"end":{"line":334,"column":6}}]},"66":{"line":339,"type":"if","locations":[{"start":{"line":339,"column":4},"end":{"line":339,"column":4}},{"start":{"line":339,"column":4},"end":{"line":339,"column":4}}]},"67":{"line":346,"type":"if","locations":[{"start":{"line":346,"column":2},"end":{"line":346,"column":2}},{"start":{"line":346,"column":2},"end":{"line":346,"column":2}}]},"68":{"line":350,"type":"if","locations":[{"start":{"line":350,"column":4},"end":{"line":350,"column":4}},{"start":{"line":350,"column":4},"end":{"line":350,"column":4}}]},"69":{"line":354,"type":"cond-expr","locations":[{"start":{"line":354,"column":49},"end":{"line":354,"column":66}},{"start":{"line":354,"column":69},"end":{"line":354,"column":70}}]},"70":{"line":355,"type":"if","locations":[{"start":{"line":355,"column":6},"end":{"line":355,"column":6}},{"start":{"line":355,"column":6},"end":{"line":355,"column":6}}]},"71":{"line":355,"type":"binary-expr","locations":[{"start":{"line":355,"column":10},"end":{"line":355,"column":25}},{"start":{"line":355,"column":29},"end":{"line":355,"column":52}}]},"72":{"line":359,"type":"cond-expr","locations":[{"start":{"line":359,"column":32},"end":{"line":359,"column":36}},{"start":{"line":359,"column":39},"end":{"line":359,"column":44}}]},"73":{"line":370,"type":"if","locations":[{"start":{"line":370,"column":2},"end":{"line":370,"column":2}},{"start":{"line":370,"column":2},"end":{"line":370,"column":2}}]},"74":{"line":372,"type":"if","locations":[{"start":{"line":372,"column":6},"end":{"line":372,"column":6}},{"start":{"line":372,"column":6},"end":{"line":372,"column":6}}]},"75":{"line":383,"type":"if","locations":[{"start":{"line":383,"column":2},"end":{"line":383,"column":2}},{"start":{"line":383,"column":2},"end":{"line":383,"column":2}}]},"76":{"line":383,"type":"binary-expr","locations":[{"start":{"line":383,"column":6},"end":{"line":383,"column":15}},{"start":{"line":383,"column":19},"end":{"line":383,"column":30}}]},"77":{"line":387,"type":"cond-expr","locations":[{"start":{"line":387,"column":33},"end":{"line":387,"column":38}},{"start":{"line":387,"column":41},"end":{"line":387,"column":50}}]},"78":{"line":394,"type":"if","locations":[{"start":{"line":394,"column":2},"end":{"line":394,"column":2}},{"start":{"line":394,"column":2},"end":{"line":394,"column":2}}]},"79":{"line":396,"type":"if","locations":[{"start":{"line":396,"column":6},"end":{"line":396,"column":6}},{"start":{"line":396,"column":6},"end":{"line":396,"column":6}}]}},"code":["/**"," * @name BufferedReader."," * @description Fully configurable buffered reader for node.js."," *"," * @author Gabriel Llamas"," * @created 10/04/2012"," * @modified 01/05/2012"," * @version 0.2.0"," *"," * Forked: https://github.com/moos/Node-BufferedReader"," */","\"use strict\";","","var EVENTS = require (\"events\");","var FS = require (\"fs\");","","var BUFFER_SIZE = 16384;","","var INVALID_BUFFER_SIZE = \"The buffer size must be greater than 0.\";","var INVALID_START_OFFSET = \"The start offset must be greater than or equals to 0.\";","var INVALID_END_OFFSET = \"The end offset must be greater than or equals to 0.\";","var INVALID_RANGE_OFFSET = \"The end offset must be greater than or equals to the start offset.\";","var INVALID_BYTES_RANGE_ERROR = \"The number of bytes to read must be greater than 0.\";","var INVALID_SEEK_OFFSET = \"The offset must be greater than or equals to 0.\";","var NO_FILE_ERROR = \"The source is not a file.\";","","var BufferedReader = function (fileName, settings){","  EVENTS.EventEmitter.call (this);","","  settings = settings || {};","","  if (settings.bufferSize === 0) settings.bufferSize = -1;","  this._settings = {","    bufferSize: settings.bufferSize || BUFFER_SIZE,","    encoding: settings.encoding || null,","    start: settings.start || 0,","    end: settings.end","  };","","  if (this._settings.bufferSize < 1) throw new Error (INVALID_BUFFER_SIZE);","  if (this._settings.start < 0) throw new Error (INVALID_START_OFFSET);","  if (this._settings.end < 0) throw new Error (INVALID_END_OFFSET);","  if (this._settings.end < this._settings.start) throw new Error (INVALID_RANGE_OFFSET);","","  this._fileName = fileName;","  this._fd = null;","  this._buffer = null;","","  this._fileOffset = this._settings.start;","  this._bufferOffset = 0;","  this._dataOffset = 0;","  this._realOffset = this._settings.start;","","  this._fileSize = null;","  this._initialized = false;","  this._interrupted = false;","  this._isEOF = false;","  this._noMoreBuffers = false;","  this._needRead = false;","};","","BufferedReader.prototype = Object.create (EVENTS.EventEmitter.prototype);","BufferedReader.prototype.constructor = BufferedReader;","","BufferedReader.prototype.interrupt = function (){","  this._interrupted = true;","};","","BufferedReader.prototype.read = function (){","  var stream = FS.createReadStream (this._fileName, this._settings);","","  // node version change: stream.encoding no longer exposed","  stream.encoding = this._settings.encoding;","","  var lastChunk;","  var buffer;","  var me = this;","  var lineOffset = 0,","    lineCount = 0,","    byteOffset = 0;","","  var onChar = this.listeners (\"character\").length !== 0,","    onLine = this.listeners (\"line\").length !== 0,","    onByte = this.listeners (\"byte\").length !== 0,","    loop = onChar || onLine || onByte;","","  stream.on (\"data\", function (data){","    buffer = data;","    var offset = 0;","    var chunk;","    var character;","    var len = data.length;","","    if (loop){","      for (var i=0; i<len; i++){","        if (me._interrupted) break;","","        character = data[i];","        if (stream.encoding){","          onChar && me.emit (\"character\", character === \"\\r\" ? \"\\n\" : character, byteOffset + i);","        }else{","          onByte && me.emit (\"byte\", character, byteOffset + i);","          continue;","        }","","        if (!onLine) continue;","        if (character === \"\\n\" || character === \"\\r\"){","          chunk = data.slice (offset, i);","","          if (lastChunk){","            chunk = lastChunk.concat (chunk);","          }","","          if (i + 1 !== len && character === \"\\r\" && data[i + 1] === \"\\n\"){","            i++;","          }","","          me.emit (\"line\", chunk, lineOffset + offset, ++lineCount);","          offset = i + 1;","          if (lastChunk){","              lineOffset += lastChunk.length;","              lastChunk = null;","            }","        }","      }","","      if (stream.encoding && offset !== len){","        var s = offset === 0 ? data : data.slice (offset);","        lastChunk = lastChunk ? lastChunk.concat (s) : s;","      }","      lineOffset += offset;","    }","","    me.emit (\"buffer\", data, byteOffset);","    if (me._interrupted){","      me._interrupted = false;","      stream.destroy ();","      me.emit (\"end\");","    }","    byteOffset += len;","","  });","","  stream.on (\"end\", function (){","    me._interrupted = false;","    if (loop && lastChunk){","      me.emit (\"line\", lastChunk);","    }","    me.emit (\"end\");","  });","","  stream.on (\"error\", function (error){","    me._interrupted = false;","    me.emit (\"error\", error);","  });","};","","BufferedReader.prototype._init = function (cb){","  var me = this;","  FS.stat (this._fileName, function (error, stats){","    if (error) return cb (error);","    if (stats.isFile ()){","      if (me._settings.start >= stats.size){","        me._isEOF = true;","        return cb (null);","      }","      if (!me._settings.end && me._settings.end !== 0){","        me._settings.end = stats.size;","      }","      if (me._settings.end >= stats.size){","        me._settings.end = stats.size - 1;","      }","      me._fileSize = stats.size;","      cb (null);","    }else{","      cb (new Error (NO_FILE_ERROR));","    }","  });","};","","BufferedReader.prototype._read = function (cb){","  var me = this;","  var size = this._settings.bufferSize;","  FS.read (this._fd, this._buffer, 0, size, this._fileOffset, function (error, bytesRead){","    if (error) return cb (error);","","    me._fileOffset += bytesRead;","    if (me._fileOffset === me._fileSize){","      me._noMoreBuffers = true;","    }","    if (bytesRead < size){","      me._buffer = me._buffer.slice (0, bytesRead);","    }","    cb (null);","  });","};","","BufferedReader.prototype._readBytes = function (bytes, cb){","  if (this._needRead){","    this._needRead = false;","    var me = this;","    this._read (function (error){","      if (error) return cb (error, null, -1);","      me._readBytes (bytes, cb);","    });","    return;","  }","","  var fill = function (){","    var endData = bytes - me._dataOffset;","    var endBuffer = me._buffer.length - me._bufferOffset;","    var end = endBuffer <= endData ? endBuffer : endData;","","    me._buffer.copy (data, me._dataOffset, me._bufferOffset, me._bufferOffset + end);","    me._bufferOffset += end;","    me._realOffset += end;","","    if (me._bufferOffset === me._buffer.length){","      me._bufferOffset = 0;","      me._needRead = true;","    }","    me._dataOffset += end;","","    if (me._dataOffset === bytes){","      me._dataOffset = 0;","      me._isEOF = me._noMoreBuffers;","      cb (null, data, bytes);","    }else{","      if (me._noMoreBuffers){","        me._isEOF = true;","        end = me._dataOffset;","        me._dataOffset = 0;","        cb (null, data.slice (0, end), end);","      }else{","        me._needRead = false;","        me._read (function (error){","          if (error) return cb (error, null, -1);","","          fill ();","        });","      }","    }","  };","","  var me = this;","","  var max = me._settings.end - me._realOffset + 1;","  bytes = max < bytes ? max : bytes;","  if (bytes === 0) return cb (null, null, 0);","","  var data = new Buffer (bytes);","  var len = me._buffer.length;","","  if (bytes <= len){","    var end = me._bufferOffset + bytes;","","    if (end <= len){","      me._buffer.copy (data, 0, me._bufferOffset, end);","      me._bufferOffset = end;","      me._realOffset += bytes;","      cb (null, data, bytes);","    }else{","      var last = len - me._bufferOffset;","      me._realOffset += last;","","      if (last !== 0){","        me._buffer.copy (data, 0, me._bufferOffset, me._bufferOffset + last);","      }","      if (me._noMoreBuffers){","        me._isEOF = true;","        return cb (null, data.slice (0, last), last);","      }","","      me._read (function (error){","        if (error) return cb (error, null, -1);","","        len = me._buffer.length;","        var remaining = bytes - last;","        if (len <= remaining){","          me._realOffset += len;","          me._isEOF = true;","          me._buffer.copy (data, last, 0, len);","          var lastChunk = last + len;","          cb (null, data.slice (0, lastChunk), lastChunk);","        }else{","          me._realOffset += remaining;","          me._bufferOffset = remaining;","          me._buffer.copy (data, last, 0, me._bufferOffset);","          cb (null, data, bytes);","        }","      });","    }","  }else{","    fill ();","  }","};","","BufferedReader.prototype.close = function (cb){","  if (cb) cb = cb.bind (this);","  if (!this._fd){","    if (cb) cb (null);","    return;","  }","","  var me = this;","  FS.close (this._fd, function (error){","    me._fd = null;","    me._buffer = null;","    if (cb) cb (error);","  });","};","","BufferedReader.prototype.readBytes = function (bytes, cb){","  cb = cb.bind (this);","  if (bytes < 1 || this._isEOF) return cb (null, null, 0);","","  var open = function (){","    if (me._isEOF) return cb (null, null, 0);","    FS.open (me._fileName, \"r\", function (error, fd){","      if (error) return cb (error, null, -1);","","      me._fd = fd;","      me._buffer = new Buffer (me._settings.bufferSize);","      me._read (function (error){","        if (error) return cb (error, null, -1);","        me._readBytes (bytes, cb);","      });","    });","  };","","  var me = this;","  if (!this._initialized){","    this._init (function (error){","      if (error) return cb (error, null);","      me._initialized = true;","      open ();","    });","  }else{","    if (!this._fd) return open ();","    this._readBytes (bytes, cb);","  }","};","","BufferedReader.prototype.seek = function (offset, cb){","  cb = cb.bind (this);","  if (offset < 0) return cb (new Error (INVALID_SEEK_OFFSET));","","  var seek = function (){","    offset += me._settings.start;","    if (offset >= me._settings.end + 1){","      me._isEOF = true;","    }else{","      me._isEOF = false;","      var start = me._fileOffset - (me._buffer ? me._buffer.length : 0);","      if (offset >= start && offset < me._fileOffset){","        me._bufferOffset = offset - start;","        me._realOffset = offset;","      }else{","        me._needRead = me._fd ? true : false;","        me._noMoreBuffers = false;","        me._fileOffset = offset;","        me._bufferOffset = 0;","        me._realOffset = offset;","      }","    }","    cb (null);","  };","","  var me = this;","  if (!this._initialized){","    this._init (function (error){","      if (error) return cb (error, null);","      me._initialized = true;","      seek ();","    });","  }else{","    seek ();","  }","};","","BufferedReader.prototype.skip = function (bytes, cb){","  cb = cb.bind (this);","  if (bytes < 1 || this._isEOF) return cb (null, 0);","","  var skip = function (){","    var remaining = me._settings.end - me._realOffset + 1;","    bytes = bytes <= remaining ? bytes : remaining;","    me.seek (me._realOffset - me._settings.start + bytes, function (){","      cb (null, bytes);","    });","  };","","  var me = this;","  if (!this._initialized){","    this._init (function (error){","      if (error) return cb (error, null);","      me._initialized = true;","      skip ();","    });","  }else{","    skip ();","  }","};","","module.exports = BufferedReader;"],"l":{"14":1,"15":1,"17":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"27":1,"28":0,"30":0,"32":0,"33":0,"40":0,"41":0,"42":0,"43":0,"45":0,"46":0,"47":0,"49":0,"50":0,"51":0,"52":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"62":1,"63":1,"65":1,"66":0,"69":1,"70":0,"73":0,"75":0,"76":0,"77":0,"78":0,"82":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"94":0,"95":0,"96":0,"98":0,"99":0,"100":0,"102":0,"103":0,"106":0,"107":0,"108":0,"110":0,"111":0,"114":0,"115":0,"118":0,"119":0,"120":0,"121":0,"122":0,"127":0,"128":0,"129":0,"131":0,"134":0,"135":0,"136":0,"137":0,"138":0,"140":0,"144":0,"145":0,"146":0,"147":0,"149":0,"152":0,"153":0,"154":0,"158":1,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"167":0,"168":0,"170":0,"171":0,"173":0,"174":0,"176":0,"181":1,"182":0,"183":0,"184":0,"185":0,"187":0,"188":0,"189":0,"191":0,"192":0,"194":0,"198":1,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"206":0,"209":0,"210":0,"211":0,"212":0,"214":0,"215":0,"216":0,"218":0,"219":0,"220":0,"222":0,"224":0,"225":0,"226":0,"227":0,"229":0,"230":0,"231":0,"232":0,"233":0,"235":0,"236":0,"237":0,"239":0,"245":0,"247":0,"248":0,"249":0,"251":0,"252":0,"254":0,"255":0,"257":0,"258":0,"259":0,"260":0,"261":0,"263":0,"264":0,"266":0,"267":0,"269":0,"270":0,"271":0,"274":0,"275":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"286":0,"287":0,"288":0,"289":0,"294":0,"298":1,"299":0,"300":0,"301":0,"302":0,"305":0,"306":0,"307":0,"308":0,"309":0,"313":1,"314":0,"315":0,"317":0,"318":0,"319":0,"320":0,"322":0,"323":0,"324":0,"325":0,"326":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"339":0,"340":0,"344":1,"345":0,"346":0,"348":0,"349":0,"350":0,"351":0,"353":0,"354":0,"355":0,"356":0,"357":0,"359":0,"360":0,"361":0,"362":0,"363":0,"366":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"377":0,"381":1,"382":0,"383":0,"385":0,"386":0,"387":0,"388":0,"389":0,"393":0,"394":0,"395":0,"396":0,"397":0,"398":0,"401":0,"405":1}},"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/tools/stat.js":{"path":"/home/travis/build/npmtest/node-npmtest-wordpos/node_modules/wordpos/tools/stat.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0},"b":{"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"(anonymous_1)","line":65,"loc":{"start":{"line":65,"column":32},"end":{"line":65,"column":45}}},"2":{"name":"(anonymous_2)","line":72,"loc":{"start":{"line":72,"column":11},"end":{"line":72,"column":29}}},"3":{"name":"(anonymous_3)","line":84,"loc":{"start":{"line":84,"column":18},"end":{"line":84,"column":34}}},"4":{"name":"(anonymous_4)","line":87,"loc":{"start":{"line":87,"column":17},"end":{"line":87,"column":40}}},"5":{"name":"(anonymous_5)","line":105,"loc":{"start":{"line":105,"column":16},"end":{"line":105,"column":27}}},"6":{"name":"(anonymous_6)","line":112,"loc":{"start":{"line":112,"column":32},"end":{"line":112,"column":51}}},"7":{"name":"(anonymous_7)","line":113,"loc":{"start":{"line":113,"column":35},"end":{"line":113,"column":48}}},"8":{"name":"(anonymous_8)","line":116,"loc":{"start":{"line":116,"column":35},"end":{"line":116,"column":59}}},"9":{"name":"(anonymous_9)","line":124,"loc":{"start":{"line":124,"column":41},"end":{"line":124,"column":54}}},"10":{"name":"(anonymous_10)","line":125,"loc":{"start":{"line":125,"column":24},"end":{"line":125,"column":48}}},"11":{"name":"(anonymous_11)","line":129,"loc":{"start":{"line":129,"column":24},"end":{"line":129,"column":44}}}},"statementMap":{"1":{"start":{"line":48,"column":0},"end":{"line":57,"column":19}},"2":{"start":{"line":59,"column":0},"end":{"line":59,"column":38}},"3":{"start":{"line":60,"column":0},"end":{"line":63,"column":1}},"4":{"start":{"line":61,"column":2},"end":{"line":61,"column":50}},"5":{"start":{"line":62,"column":2},"end":{"line":62,"column":18}},"6":{"start":{"line":65,"column":0},"end":{"line":155,"column":3}},"7":{"start":{"line":67,"column":2},"end":{"line":70,"column":3}},"8":{"start":{"line":68,"column":4},"end":{"line":68,"column":18}},"9":{"start":{"line":69,"column":4},"end":{"line":69,"column":17}},"10":{"start":{"line":71,"column":2},"end":{"line":71,"column":14}},"11":{"start":{"line":74,"column":2},"end":{"line":81,"column":20}},"12":{"start":{"line":83,"column":2},"end":{"line":154,"column":12}},"13":{"start":{"line":85,"column":6},"end":{"line":85,"column":50}},"14":{"start":{"line":89,"column":6},"end":{"line":89,"column":33}},"15":{"start":{"line":89,"column":26},"end":{"line":89,"column":33}},"16":{"start":{"line":92,"column":6},"end":{"line":92,"column":75}},"17":{"start":{"line":93,"column":6},"end":{"line":93,"column":44}},"18":{"start":{"line":93,"column":29},"end":{"line":93,"column":44}},"19":{"start":{"line":95,"column":6},"end":{"line":98,"column":7}},"20":{"start":{"line":96,"column":8},"end":{"line":96,"column":23}},"21":{"start":{"line":97,"column":8},"end":{"line":97,"column":15}},"22":{"start":{"line":100,"column":6},"end":{"line":100,"column":23}},"23":{"start":{"line":101,"column":6},"end":{"line":101,"column":30}},"24":{"start":{"line":102,"column":6},"end":{"line":102,"column":55}},"25":{"start":{"line":103,"column":6},"end":{"line":103,"column":20}},"26":{"start":{"line":108,"column":6},"end":{"line":108,"column":36}},"27":{"start":{"line":109,"column":6},"end":{"line":109,"column":42}},"28":{"start":{"line":111,"column":6},"end":{"line":118,"column":119}},"29":{"start":{"line":112,"column":53},"end":{"line":112,"column":71}},"30":{"start":{"line":113,"column":50},"end":{"line":113,"column":61}},"31":{"start":{"line":116,"column":61},"end":{"line":116,"column":100}},"32":{"start":{"line":120,"column":6},"end":{"line":120,"column":34}},"33":{"start":{"line":122,"column":6},"end":{"line":133,"column":7}},"34":{"start":{"line":124,"column":8},"end":{"line":124,"column":99}},"35":{"start":{"line":124,"column":56},"end":{"line":124,"column":96}},"36":{"start":{"line":125,"column":8},"end":{"line":127,"column":15}},"37":{"start":{"line":126,"column":14},"end":{"line":126,"column":37}},"38":{"start":{"line":128,"column":8},"end":{"line":128,"column":17}},"39":{"start":{"line":129,"column":8},"end":{"line":129,"column":76}},"40":{"start":{"line":129,"column":46},"end":{"line":129,"column":73}},"41":{"start":{"line":130,"column":8},"end":{"line":132,"column":27}},"42":{"start":{"line":136,"column":6},"end":{"line":149,"column":8}},"43":{"start":{"line":151,"column":6},"end":{"line":151,"column":63}},"44":{"start":{"line":152,"column":6},"end":{"line":152,"column":44}}},"branchMap":{"1":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":0},"end":{"line":60,"column":0}},{"start":{"line":60,"column":0},"end":{"line":60,"column":0}}]},"2":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":2},"end":{"line":67,"column":2}},{"start":{"line":67,"column":2},"end":{"line":67,"column":2}}]},"3":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":6},"end":{"line":89,"column":6}},{"start":{"line":89,"column":6},"end":{"line":89,"column":6}}]},"4":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":6},"end":{"line":93,"column":6}},{"start":{"line":93,"column":6},"end":{"line":93,"column":6}}]},"5":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":6},"end":{"line":95,"column":6}},{"start":{"line":95,"column":6},"end":{"line":95,"column":6}}]},"6":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":7},"end":{"line":102,"column":23}},{"start":{"line":102,"column":28},"end":{"line":102,"column":54}}]},"7":{"line":116,"type":"cond-expr","locations":[{"start":{"line":116,"column":89},"end":{"line":116,"column":92}},{"start":{"line":116,"column":96},"end":{"line":116,"column":98}}]},"8":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":6},"end":{"line":122,"column":6}},{"start":{"line":122,"column":6},"end":{"line":122,"column":6}}]}},"code":["/**"," * stat.js"," *"," *     generate fast index for WordNet index files"," *"," * Usage:"," *    node stat [--no-stats] index.adv ..."," *"," * --no-stats prevents writing bucket size statistics to file."," *"," * Fast index is based on buckets keyed off first THREE characters in the index word,"," * eg, 'awesome' goes into bucket 'awe'."," *"," * Format of the fast index JSON object:"," *  {"," *   \"firstKey\":\".22\",\t\t\t\t// first key value"," *   \"keyLength\":3,\t\t\t\t\t// #characters in key"," *   \"version\":\"3.0\",\t\t\t\t// WNdb version"," *   \"name\":\"index.adj\",\t\t\t// index file name"," *   \"stats\":{"," *   \t\"buckets\":2326,\t\t\t\t// # of buckets"," *   \t\"words\":21479,\t\t\t\t// total # words"," *   \t\"biggest\":310,\t\t\t\t// #words in biggest bucket"," *   \t\"avg\":\"9.23\",\t\t\t\t// average #words per bucket"," *   \t\"median\":3\t\t\t\t\t// median #words per bucket"," *     },"," *   \"offsets\":{"," *     \"100\":[2271,\"101\"],\t\t\t// \"100\" is the key,"," *     \t\t\t\t\t\t\t\t// value=[byte offset in index file, next key]"," *      ..."," *    }"," *  }"," *"," *  To lookup a word:"," *"," *  find key (first <keyLength> chars of word)"," *  look it up in <offsets> O(1)"," *  if it exists"," *  \tget offset of key and offset of next key"," *      read index file between the two offsets"," *  \tbinary search read data O(log avg)"," *"," * Copyright (c) 2012-2016 mooster@42at.com"," * https://github.com/moos/wordpos"," *"," * Released under MIT license"," */","var","  WNdb = require('../src/wordpos').WNdb,","  util = require('util'),","  BufferedReader = require ('./buffered-reader'),","  _ = require('underscore')._,","  fs = require('fs'),","  path = require('path'),","  KEY_LENGTH = 3,","  stats = true,","  eofKey = '_EOF_'; // should be unique","","console.log('DB folder: ', WNdb.path);","if (process.argv.length < 3) {","  console.log('#Usage:\\nnode stat index.adv ...');","  process.exit(1);","}","","_(process.argv.slice(2)).filter(function(arg){","  // disable writing stats file","  if (arg == '--no-stats') {","    stats = false;","    return false;","  }","  return true;","}).forEach(function(basename){","","  var indexFile = path.join(WNdb.path, basename),","    jsonFile = path.join(WNdb.path, 'fast-' + basename + '.json'),","    countFile = 'fast-' + basename + '.tsv',","    endOffset = fs.statSync(indexFile).size,","    buckets = {},","    lastKey = null,","    offsets = {},","    firstKey = null;","","  new BufferedReader (indexFile, {encoding: \"utf8\"})","    .on (\"error\", function (error){","      console.log (\"error: %s\", indexFile, error);","    })","    .on (\"line\", function (line, offset){","      // skip license info","      if (line[0] == ' ') return;","","      // if (++i > 225) return this.interrupt();","      var key = line.substring(0, Math.min(line.indexOf(' '), KEY_LENGTH));","      if (firstKey === null) firstKey = key;","","      if (key in buckets) {","        ++buckets[key];","        return;","      }","","      buckets[key] = 1;","      offsets[key] = [offset];","      (lastKey !== null) && offsets[lastKey].push(key);\t// current key is the 'next key' for the previous key","      lastKey = key;","    })","    .on (\"end\", function (){","","      // add EOF offset","      offsets[lastKey].push(eofKey);","      offsets[eofKey] = [endOffset, null];","","      var size = _.size(buckets),","        sum = _.reduce(buckets, function(memo, num){ return memo + num; }, 0),","        sorted = _.sortBy(buckets, function(val){ return val }),","        median = sorted[Math.floor(size/2)],","        max =  sorted[sorted.length-1], // _.max(buckets),","        maxkey = _.reduce(buckets, function(memo, val, key){ return memo + (val == max ? key :  '') }, ''),","        avg = (sum/size).toFixed(2),","        info = util.format('buckets %d, max %d at %s, sum %d, avg %d, median %d', size, max, maxkey, sum, avg, median);","","      console.log(basename, info);","","      if (stats) {","        // distribution in groups of 10","        var grouped = _.groupBy(buckets, function(num){ return 1 + 10*(Math.floor((num-1)/10) ) });","        _(grouped).each(function(arr, key, list){","              list[key] = arr.length;","            });","        str = '';","        _.each(grouped, function(value, key){ str += key+\"\\t\"+value+\"\\n\" });","        fs.writeFileSync(countFile, '#'+info+'\\n'","            + '#bucket_size (1-10, 11-20, etc.) \\t #buckets\\n'","            + str, 'utf8');","      }","","      // offset data","      var data = {","          firstKey: firstKey,","          keyLength: KEY_LENGTH,","          version: WNdb.version,","          name: basename,","          stats: {","            buckets: size,","            words: sum,","            biggest: max,","            avg: avg,","            median: median","          },","          offsets: offsets","      };","","      fs.writeFileSync(jsonFile, JSON.stringify(data), 'utf8');","      console.log('  wrote %s\\n', jsonFile);","    })","    .read();","});",""],"l":{"48":1,"59":1,"60":1,"61":1,"62":1,"65":1,"67":0,"68":0,"69":0,"71":0,"74":0,"83":0,"85":0,"89":0,"92":0,"93":0,"95":0,"96":0,"97":0,"100":0,"101":0,"102":0,"103":0,"108":0,"109":0,"111":0,"112":0,"113":0,"116":0,"120":0,"122":0,"124":0,"125":0,"126":0,"128":0,"129":0,"130":0,"136":0,"151":0,"152":0}}}